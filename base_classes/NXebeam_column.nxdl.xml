<?xml version='1.0' encoding='UTF-8'?>
<?xml-stylesheet type="text/xsl" href="nxdlformat.xsl"?>
<!--
# NeXus - Neutron and X-ray Common Data Format
#
# Copyright (C) 2014-2025 NeXus International Advisory Committee (NIAC)
#
# This library is free software; you can redistribute it and/or
# modify it under the terms of the GNU Lesser General Public
# License as published by the Free Software Foundation; either
# version 3 of the License, or (at your option) any later version.
#
# This library is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# Lesser General Public License for more details.
#
# You should have received a copy of the GNU Lesser General Public
# License along with this library; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
#
# For further information, see http://www.nexusformat.org
-->
<!--
rationale for having NXebeam_column concepts in an own base class and not in NXinstrument_em
is that one may like to use the ebeam generating part also in other experiments-->
<definition xmlns="http://definition.nexusformat.org/nxdl/3.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" category="base" type="group" name="NXebeam_column" extends="NXobject" xsi:schemaLocation="http://definition.nexusformat.org/nxdl/3.1 ../nxdl.xsd">
    <doc>
         Base class for a set of components providing a controllable electron beam.
    </doc>
    <field name="operation_mode" type="NX_CHAR">
        <doc>
             Typically tech-partner, microscope-, and control software-specific
             name of the specific operation mode how the ebeam_column and its
             components are controlled to achieve a specific illumination condition
             (typically referring to conditions illuminating the specimen).
             
             In many cases the users of an instrument do not know or can not be
             expected to know all the detailed spatiotemporal dynamics of their hardware.
             Instead, they rely of on assumptions that the instrument and its control software
             and parts work as expected to focus on their research questions.
             
             For this scenario it is useful to have the possibility to document the operation_mode
             in that it reports at least some constraints on how the illumination conditions were.
        </doc>
    </field>
    <group type="NXfabrication"/>
    <field name="description" type="NX_CHAR">
        <doc>
             Discouraged free-text field for describing details about the component.
        </doc>
    </field>
    <group name="electron_source" type="NXsource">
        <doc>
             A physical part of an electron or ion microscope from which
             the particles that form the beam are emitted.
             
             The hardware for an electron source in an electron microscope
             may contain several components which affect the beam path.
             
             This concept is related to term `Source`_ of the EMglossary standard.
             
             .. _Source: https://purls.helmholtz-metadaten.de/emg/EMG_00000045
        </doc>
        <field name="name" type="NX_CHAR">
            <doc>
                 Given name/alias.
            </doc>
        </field>
        <group type="NXfabrication"/>
        <field name="voltage" type="NX_NUMBER" units="NX_VOLTAGE">
            <doc>
                 The potential difference between anode and cathode.
                 
                 This concept is related to term `Acceleration Voltage`_ of the EMglossary standard.
                 
                 .. _Acceleration Voltage: https://purls.helmholtz-metadaten.de/emg/EMG_00000004
            </doc>
        </field>
        <field name="extraction_voltage" type="NX_NUMBER" units="NX_VOLTAGE">
            <doc>
                 Voltage which is utilised to create an electric field that draws particles from
                 the source.
                 
                 This concept is related to term `Extraction Voltage`_ of the EMglossary standard.
                 
                 .. _Extraction Voltage: https://purls.helmholtz-metadaten.de/emg/EMG_00000025
            </doc>
        </field>
        <field name="emission_current" type="NX_NUMBER" units="NX_CURRENT">
            <doc>
                 Electrical current which is released from the source.
                 
                 This concept is related to term `Emission Current`_ of the EMglossary standard.
                 
                 .. _Emission Current: https://purls.helmholtz-metadaten.de/emg/EMG_00000025
            </doc>
        </field>
        <field name="filament_current" type="NX_NUMBER" units="NX_CURRENT">
            <doc>
                 Electrical current which flows through the source.
                 
                 This concept is related to term `Filament Current`_ of the EMglossary standard.
                 
                 .. _Filament Current: https://purls.helmholtz-metadaten.de/emg/EMG_00000027
            </doc>
        </field>
        <field name="probe" type="NX_CHAR">
            <doc>
                 Type of radiation.
            </doc>
            <enumeration>
                <item value="electron"/>
            </enumeration>
        </field>
        <field name="emitter_type" type="NX_CHAR">
            <doc>
                 Emitter type used to create the beam.
                 
                 If the emitter type is other, give further details
                 in the description field.
            </doc>
        </field>
        <!--enumeration: [filament, schottky, cold_cathode_field_emitter, other]-->
        <field name="emitter_material" type="NX_CHAR">
            <doc>
                 Material of which the emitter is build, e.g. the filament material.
            </doc>
        </field>
        <!--emitter material could inherit from NXsample-->
        <field name="description" type="NX_CHAR">
            <doc>
                 Free-text field to store further details about the source.
            </doc>
        </field>
        <field name="lifetime" type="NX_TIME">
            <doc>
                 How long has the source been in operation.
            </doc>
        </field>
        <group type="NXtransformations">
            <doc>
                 Collection of axis-based translations and rotations to describe the
                 location and geometry of the component in the instrument.
            </doc>
        </group>
    </group>
    <group type="NXlens_em"/>
    <group type="NXaperture"/>
    <group type="NXdeflector"/>
    <group type="NXmonochromator">
        <doc>
             Device to improve energy resolution or chromatic aberration.
             
             Examples are Wien, $\textalpha$-, or $\Omega$- energy filter or `cc corrector
             like &lt;https://www.ceos-gmbh.de/en/basics/cc-corrector&gt;`_
        </doc>
        <!--control level perspective-->
        <field name="applied" type="NX_BOOLEAN">
            <doc>
                 Was the corrector used?
            </doc>
        </field>
        <!--technical level-->
        <field name="dispersion" type="NX_NUMBER" units="NX_ANY">
            <doc>
                 Energy dispersion in e.g. µm/eV.
            </doc>
        </field>
        <field name="voltage" type="NX_NUMBER" units="NX_VOLTAGE">
            <doc>
                 Corresponding voltage for that energy dispersion.
            </doc>
        </field>
    </group>
    <group name="corrector_cs" type="NXcorrector_cs"/>
    <group name="corrector_ax" type="NXobject" minOccurs="0" maxOccurs="1">
        <doc>
             Device reshaping an ellipse-shaped electron beam to a circular one.
             
             * `L. Reimer 1998, Springer, 1998 &lt;https://dx.doi.org/10.1007/978-3-540-3896&gt;`_
             * `M. Tanaka et al., Electron Microscopy Glossary, 2024 &lt;https://www.jeol.com/words/semterms/20201020.111014.php#gsc.tab=0&gt;`_
             
             Stigmator is an exact synonym.
        </doc>
        <group name="fabrication" type="NXfabrication"/>
        <field name="value_x" type="NX_NUMBER" units="NX_ANY">
            <doc>
                 Descriptor for the correction strength along the first direction when exact technical details
                 are unknown or not directly controllable as the control software of the microscope does not
                 enable or was not configured to display these values (for end users).
            </doc>
        </field>
        <field name="value_y" type="NX_NUMBER" units="NX_ANY">
            <doc>
                 Descriptor for the correction strength along the second direction when exact technical details
                 are unknown or not directly controllable as the control software of the microscope does not
                 enable or was not configured to display these values (for end users).
            </doc>
        </field>
    </group>
    <group name="biprism" type="NXobject">
        <doc>
             Electron biprism as it is used e.g. for electron holography.
        </doc>
        <group name="fabrication" type="NXfabrication"/>
    </group>
    <group name="phaseplateID" type="NXobject">
        <doc>
             Device that causes a change in the phase of an electron wave.
             
             * `M. Malac et al. &lt;https://doi.org/10.1093/jmicro/dfaa070&gt;`_
             * `R. R. Schröder et al. &lt;https://www.lem.kit.edu/152.php&gt;`_
        </doc>
        <field name="type" type="NX_CHAR">
            <doc>
                 Qualitative type
            </doc>
            <enumeration>
                <item value="thin_film"/>
                <item value="electrostatic"/>
            </enumeration>
        </field>
        <group name="fabrication" type="NXfabrication"/>
    </group>
    <group type="NXsensor"/>
    <group type="NXactuator"/>
    <group type="NXbeam">
        <doc>
             Individual characterization results for the position, shape,
             and characteristics of the electron beam at a given location.
             
             :ref:`NXtransformations` should be used to specify the location
             or the position at which details about the beam were probed.
             
             This concept is related to term `Electron Beam`_ of the EMglossary standard.
             
             .. _Electron Beam: https://purls.helmholtz-metadaten.de/emg/EMG_00000021
        </doc>
    </group>
</definition>
