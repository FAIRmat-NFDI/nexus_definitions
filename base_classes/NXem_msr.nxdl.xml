<?xml version='1.0' encoding='UTF-8'?>
<?xml-stylesheet type="text/xsl" href="nxdlformat.xsl"?>
<!--
# NeXus - Neutron and X-ray Common Data Format
#
# Copyright (C) 2014-2024 NeXus International Advisory Committee (NIAC)
#
# This library is free software; you can redistribute it and/or
# modify it under the terms of the GNU Lesser General Public
# License as published by the Free Software Foundation; either
# version 3 of the License, or (at your option) any later version.
#
# This library is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# Lesser General Public License for more details.
#
# You should have received a copy of the GNU Lesser General Public
# License along with this library; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
#
# For further information, see http://www.nexusformat.org
-->
<definition xmlns="http://definition.nexusformat.org/nxdl/3.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" category="base" type="group" name="NXem_msr" extends="NXobject" xsi:schemaLocation="http://definition.nexusformat.org/nxdl/3.1 ../nxdl.xsd">
    <doc>
         Base class for collecting a session with a real electron microscope.
         
         For collecting data and experiments which are simulations of an electron
         microscope (or such session) use the :ref:`NXem_sim` base class.
    </doc>
    <group name="em_lab" type="NXinstrument">
        <doc>
             (Meta)data of the microscope and the lab in which it stands.
             
             This em_lab group differs from potential em_lab groups inside
             :ref:`NXevent_data_em` instances in that here the more static descriptions
             are kept while dynamic/changing, i.e. time-dependent pieces of information
             are logged via the em_lab group inside the desired number of instances
             of :ref:`NXevent_data_em`.
             
             While using an :ref:`NXevent_data_em` instance, users should store only those
             settings about a component which are relevant to understand the current
             state of the component. Here, current means for the time interval which
             the event covers (as framed temporally via start_time and end_time).
             
             For example it is not relevant to store in each :ref:`NXevent_data_em`
             electron_source group again the details of the gun type and the manufacturer
             but only the high-voltage value and this also only if it is different from the value
             that is specified in the em_lab section for the static settings.
             
             In effect, this defines an information inference hierarchy which starts
             with search within individual :ref:`NXevent_data_em` instances followed
             by a probing the static section for missing metadata.
        </doc>
        <field name="instrument_name" type="NX_CHAR">
            <doc>
                 Given name of the microscope at the hosting institution.
                 This is an alias. Examples could be NionHermes, Titan, JEOL,
                 Gemini, etc.
            </doc>
        </field>
        <field name="location" type="NX_CHAR">
            <doc>
                 Location of the lab or place where the instrument is installed.
                 Using GEOREF is preferred.
            </doc>
        </field>
        <group type="NXfabrication"/>
        <group type="NXchamber"/>
        <group type="NXebeam_column"/>
        <group type="NXibeam_column"/>
        <group type="NXoptical_system_em"/>
        <!--storing these data should happen in event_data, i.e. dynamic quantities-->
        <group type="NXscanbox_em"/>
        <group type="NXdetector">
            <doc>
                 Description of the type of the detector.
                 
                 Electron microscopes have typically multiple detectors.
                 Different technologies are in use like CCD, scintillator,
                 direct electron, CMOS, or image plate to name but a few.
            </doc>
            <field name="local_name" type="NX_CHAR">
                <doc>
                     Instrument-specific alias/name
                </doc>
            </field>
        </group>
        <group type="NXpump"/>
        <group type="NXstage_lab"/>
        <group type="NXsensor"/>
        <group type="NXactuator"/>
    </group>
    <group type="NXevent_data_em"/>
</definition>
