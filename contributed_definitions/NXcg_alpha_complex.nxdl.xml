<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="nxdlformat.xsl"?>
<!--
# NeXus - Neutron and X-ray Common Data Format
# 
# Copyright (C) 2014-2022 NeXus International Advisory Committee (NIAC)
# 
# This library is free software; you can redistribute it and/or
# modify it under the terms of the GNU Lesser General Public
# License as published by the Free Software Foundation; either
# version 3 of the License, or (at your option) any later version.
#
# This library is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# Lesser General Public License for more details.
#
# You should have received a copy of the GNU Lesser General Public
# License along with this library; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
#
# For further information, see http://www.nexusformat.org
-->
<!--The so-called spectrum or sets of (weighted) alpha shapes includes the convex hull of a point set.-->
<definition xmlns="http://definition.nexusformat.org/nxdl/3.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" category="base" type="group" name="NXcg_alpha_complex" extends="NXobject" xsi:schemaLocation="http://definition.nexusformat.org/nxdl/3.1 ../nxdl.xsd">
    <doc>
         Computational geometry of alpha shapes or alpha wrappings about primitives.
    </doc>
    <field name="dimensionality" type="NX_POSINT" units="NX_UNITLESS">
        <enumeration>
            <item value="2"/>
            <item value="3"/>
        </enumeration>
    </field>
    <field name="type">
        <doc>
             Type of alpha complex following the terminology used by CGAL for now.
        </doc>
        <enumeration>
            <item value="convex_hull"/>
            <item value="alpha_shape"/>
            <item value="alpha_wrapping"/>
        </enumeration>
    </field>
    <field name="regularize_alpha_complex" type="NX_BOOLEAN">
        <doc>
             Are singular faces removed, i.e. has the alpha complex
             been regularized or not.
        </doc>
    </field>
    <field name="alpha" type="NX_FLOAT" units="NX_LENGTH">
        <doc>
             The alpha, radius of the alpha-sphere, parameter used
             when computing the alpha complex.
        </doc>
    </field>
    <!--the dim: argument can be omitted to indicate that a scalar is expected
means a length quantity, i.e. m, km, or nm is possible i.e. has to be length but no further constraints
stating meter is a stronger constraint while m is the strongest constraint, meaning literally the value is m.-->
    <field name="offset" type="NX_FLOAT" units="NX_LENGTH">
        <doc>
             The offset distance parameter used
             when computing alpha_wrappings.
        </doc>
    </field>
    <!--check again carefully the CGAL documentation talks about, for 3D, the square of the radius!-->
    <group name="point_set" type="NXcg_point_set">
        <!--basically just constraints that if you use one or more instances of NXcg_point_set
inside a n instance of NXcg_alpha_complex name that group with the prefix "point_set"-->
        <doc>
             Point cloud for which the alpha shape or wrapping has been computed.
        </doc>
    </group>
    <!--this could also just be implemented as a link but how would this be possible
unfold the NXcg_point_set and add a
weight(NX_NUMBER):
doc: Weights for each point
In general, an alpha complex is a disconnected and non-pure complex,
meaning in particular that the alpha complex may have singular faces.
so the number of cells, faces and edges depends on how a specific alpha complex,
i.e. an alpha-shape of S for alpha, is filtrated with respect to k < d-dimensional
simplices. Here we assume that number_of_cells, number_of_faces, number_of_edges
are reported assuming one filtrates these simplices according to mode.
also using the assumption the base class reports the unique vertices
of the specifically filtrated alpha complex.-->
    <group name="triangle_set" type="NXcg_triangle_set">
        <doc>
             Triangle soup for which the alpha wrapping has been computed.
        </doc>
    </group>
    <group name="triangulation" type="NXcg_triangle_set">
        <doc>
             Triangle mesh representing the alpha complex.
        </doc>
    </group>
    <!--add for each triangle if desirable a notation of whether the simplex is
exterior, regular, singular, or interior with respect to the alpha complex
a triangulation is more than a triangle (soup)/set because there it has connectivity
customize the NXcg_triangle_set base class members such that connectivity can be contained naturally
we need to find also a better name for this, what people intutive understand
as the interior, may not even exist for a given alpha value
more specifically it is the set of filtrated cells acknowledging mode
e.g. the interior cells of the regularized alpha complex-->
    <group name="interior_cells" type="NXcg_tetrahedron_set">
        <doc>
             Set of tetrahedra representing the volume inside the alpha complex.
        </doc>
    </group>
    <!--document the alpha status
https://doc.cgal.org/latest/Alpha_shapes_3/classCGAL_1_1Alpha__status.html-->
</definition>
