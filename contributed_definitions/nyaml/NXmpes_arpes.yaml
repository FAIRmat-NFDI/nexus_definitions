#Pincelli, Rettig, Arora at fhi-berlin.mpg.de, Dobener at hu-berlin.de, 06/2022
#Draft version of a NeXus application definition for photoemission,
#It is designed to be extended by other application definitions
#with higher granularity in the data description.

doc: This is an general application definition for angle-resolved multidimensional photoelectron spectroscopy.
category: application
NXmpes_arpes(NXmpes):
    definition:
      \@version:
      enumeration: ["NXmpes_arpes"]
    (NXinstrument):
      angular_resolution(NX_FLOAT):
        unit: NX_ANGLE
      (NXelectronanalyser):
        description:
        angular_resolution(NX_FLOAT):
          exists: recommended
          doc: "Angular resolution of the electron analyser with the current setting. May be linked from a NXcalibration."
          unit: NX_ANGLE
        (NXcollectioncolumn):
          scheme:
            doc: "Scheme of the electron collection column."
            enumeration: [
              "Standard",
              "Angular dispersive",
              "Deflector",
            ]
        (NXenergydispersion):
        (NXdetector):
          (NXdata): # Raw signal without calibrated axes.
            exists: recommended
            \@signal:
              enumeration: ['raw']
            raw(NX_NUMBER): # There is a block of numbers named raw.
              doc: "Raw data before calibration."
      depends_on(NX_CHAR):
        doc: "Reference to the transformation describing the orientation of the analyzer relative to the beam."
      (NXtransformations):
        doc: "Set of transformations, describing the relative orienation of the analyzer with respect to the beam coordinate system (.)."
    (NXsample):
      situation:
        enumeration: ["vacuum"]
      # Similar situation here, ca be a single number or a log.
      depends_on(NX_CHAR):
        doc: "Reference to a transformation describing the orientation of the sample relative to the beam coordinate system (.)."
      (NXtransformations):
        doc: "Set of transformations, describing the relative orientation of the sample with respect to the beam coordinate system (.)."
    (NXdata):
      \@signal:
        enumeration: ["data"] # There is an object named data that contains the signal
      \@axes:
        enumeration: ["[fastAngle, Energy]", "[fastAngle, slowAngle, Energy]"]
      data(NX_NUMBER): # There is a block of numbers named data.
        doc: "Represents a measure of two- or more-dimensional photoemission counts, where
          the varied axes are energy, and one or more angular coordinates. Axes traces
          should be linked to the actual encoder position in NXinstrument or calibrated axes in NXprocess."
        unit: NX_ANY
