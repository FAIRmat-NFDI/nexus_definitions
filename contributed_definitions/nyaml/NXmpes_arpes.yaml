#Pincelli, Rettig, Arora at fhi-berlin.mpg.de, Dobener at hu-berlin.de, 06/2022
#Draft version of a NeXus application definition for photoemission,
#It is designed to be extended by other application definitions
#with higher granularity in the data description.

doc: This is an general application definition for angle-resolved multidimensional photoelectron spectroscopy.
category: application
NXmpes_arpes(NXmpes):
    definition:
      \@version:
      enumeration: ["NXmpes_arpes"]
    (NXinstrument):
      angular_resolution(NX_FLOAT):
        unit: NX_ANGLE
      (NXelectronanalyser):
        description:
        angular_resolution(NX_FLOAT):
          exists: recommended
          doc: "Angular resolution of the electron analyser with the current setting. May be linked from a NXcalibration."
          unit: NX_ANGLE
        (NXcollectioncolumn):
          scheme:
            doc: "Scheme of the electron collection column."
            enumeration: [
              "Standard",
              "Angular dispersive",
              "Deflector",
            ]
        (NXenergydispersion):
        (NXdetector):
          (NXdata): # Raw signal without calibrated axes.
            exists: recommended
            \@signal:
              enumeration: ['raw']
            raw(NX_NUMBER): # There is a block of numbers named raw.
              doc: "Raw data before calibration."
      depends_on(NX_CHAR):
        doc: "Reference to the beam coordinate system (.)."
      transformations(NXtransformations):
        trans_x[AXISNAME]:
          exists: recommended
          unit: NX_LENGTH
          \@transformation_type: translation
          \@vector:
          \@depends_on:
        trans_y[AXISNAME]:
          exists: recommended
          unit: NX_LENGTH
          \@transformation_type: translation
          \@vector:
          \@depends_on:
        trans_z[AXISNAME]:
          exists: recommended
          unit: NX_LENGTH
          \@transformation_type: translation
          \@vector:
          \@depends_on:
        rot_x[AXISNAME]:
          unit: NX_LENGTH
          \@transformation_type: rotation
          \@vector:
          \@depends_on:
        rot_y[AXISNAME]:
          unit: NX_LENGTH
          \@transformation_type: rotation
          \@vector:
          \@depends_on:
        rot_z[AXISNAME]:
          unit: NX_LENGTH
          \@transformation_type: rotation
          \@vector:
          \@depends_on:
    (NXsample):
      situation:
        enumeration: ["vacuum"]
      # Similar situation here, ca be a single number or a log.
      depends_on(NX_CHAR):
        doc: "Reference to a transformation describing the origin of the sample manipulator coordinate system relative to the beam coordinate system (.)."
      transformations(NXtransformations):
        trans_x[AXISNAME]:
          exists: recommended
          unit: NX_LENGTH
          \@transformation_type: translation
          \@vector:
          \@depends_on:
        trans_y[AXISNAME]:
          exists: recommended
          unit: NX_LENGTH
          \@transformation_type: translation
          \@vector:
          \@depends_on:
        trans_z[AXISNAME]:
          exists: recommended
          unit: NX_LENGTH
          \@transformation_type: translation
          \@vector:
          \@depends_on:
        rot_x[AXISNAME]:
          unit: NX_LENGTH
          \@transformation_type: rotation
          \@vector:
          \@depends_on:
        rot_y[AXISNAME]:
          unit: NX_LENGTH
          \@transformation_type: rotation
          \@vector:
          \@depends_on:
        rot_z[AXISNAME]:
          unit: NX_LENGTH
          \@transformation_type: rotation
          \@vector:
          \@depends_on:

    (NXdata):
      \@signal:
        enumeration: ["data"] # There is an object named data that contains the signal
      data(NX_NUMBER): # There is a block of numbers named data.
        doc: "Represents a measure of two- or more-dimensional photoemission counts, where
          the varied axes are energy, and one or more angular coordinates. Axes traces
          should be linked to the actual encoder position in NXinstrument or calibrated axes in NXprocess."
        unit: NX_ANY
