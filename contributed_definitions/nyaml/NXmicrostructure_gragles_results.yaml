category: application
doc: |
  Application definition for documenting results with GraGLeS.
symbols:
  doc: |
    The symbols used in the schema to specify e.g. dimensions of arrays.
  n_summary_stats: |
    The total number of summary statistic log entries.
  n_grains: |
    Number of grains in the computer simulation.
  n_interfaces: |
    Number of interfaces in the computer simulation.
type: group
NXmicrostructure_gragles_results(NXobject):
  (NXentry):
    definition(NX_CHAR):
      enumeration: [NXmicrostructure_gragles_results]
    
    # For rollett_holm :math:`m(\Theta) = m_0 \cdot (1 - c_1 * exp(-c_2 \cdot \frac{\Theta}{15}^{c_3}))`.
    identifier_simulation(NX_UINT):
      doc: |
        Simulation ID as an alias to refer to this simulation.
    description(NX_CHAR):
      doc: |
        Discouraged free-text field to add further details to the computation.
    start_time(NX_DATE_TIME):
    end_time(NX_DATE_TIME):
      exists: recommended
    (NXuser):
      exists: ['min', '0', 'max', 'unbounded']
    program1(NXprogram):
      program_name:
        \@version:
        \@url:
          exists: recommended
    environment(NXcollection):
      exists: optional
      doc: |
        Programs and libraries representing the computational environment
      (NXprogram):
        exists: ['min', '1', 'max', 'unbounded']
        program(NX_CHAR):
          \@version(NX_CHAR):
    sample_reference_frame(NXcoordinate_system):
      type:
      handedness:
      origin:
      x_alias:
      x_direction:
      y_alias:
      y_direction:
      z_alias:
      z_direction:
    SPATIOTEMPORAL(NXprocess):
      nameType: any
      doc: |
        Documentation of the spatiotemporal evolution
        
        Instances should use spatiotemporal as a name prefix.
      
      # static quantities for which no change is modelled
      # the typical lean summary statistics flattened
      summary_statistics(NXprocess):
        doc: |
          Summary quantities which are the result of some post-processing of the snapshot data
          (averaging, integrating, interpolating) happening in for practical reasons though in while
          running the simulation. Place used for storing descriptors from continuum mechanics
          and thermodynamics at the scale of the entire ROI.
        kinetics(NXprocess):
          exists: optional
          doc: |
            Evolution of the recrystallized volume fraction over time.
          time(NX_NUMBER):
            unit: NX_TIME
            doc: |
              Evolution of the physical time not to be confused with wall-clock time or
              profiling data.
            dimensions:
              rank: 1
              dim: (n_summary_stats,)
          iteration(NX_INT):
            unit: NX_UNITLESS
            doc: |
              Iteration or increment counter.
          number_of_crystals(NX_UINT):
            unit: NX_UNITLESS
            doc: |
              How many crystals are distinguished.
              Crystals are listed irrespective of the phase to which these are assigned.
            dimensions:
              rank: 1
              dim: (n_summary_stats,)
        stress(NXprocess):
          exists: optional
          type:
            doc: |
              Which type of stress.
            enumeration: [cauchy]
          stress(NX_FLOAT):
            unit: NX_ANY
            doc: |
              Applied external stress tensor on the ROI.
            dimensions:
              rank: 3
              dim: (n_summary_stats, 3, 3)
        strain(NXprocess):
          exists: optional
          type:
            doc: |
              Which type of strain.
          strain(NX_FLOAT):
            unit: NX_ANY
            doc: |
              Applied external strain tensor on the ROI.
            dimensions:
              rank: 3
              dim: (n_summary_stats, 3, 3)
        deformation_gradient(NXprocess):
          exists: optional
          type:
            doc: |
              Which type of deformation gradient.
            enumeration: [piola]
          value(NX_FLOAT):
            unit: NX_ANY
            doc: |
              Applied deformation gradient tensor on the ROI.
            dimensions:
              rank: 3
              dim: (n_summary_stats, 3, 3)
        magnetic_field(NXprocess):
          exists: optional
          strength(NX_FLOAT):
            unit: NX_ANY
            doc: |
              Applied external magnetic field on the ROI.
            dimensions:
              rank: 3
              dim: (n_summary_stats, 3, 3)
        electrical_field(NXprocess):
          exists: optional
          
          # specify type of field
          strength(NX_FLOAT):
            unit: NX_ANY
            doc: |
              Applied external electrical field on the ROI.
            dimensions:
              rank: 3
              dim: (n_summary_stats, 3, 3)
      
      # the typically storage-costlier snapshot data
      (NXmicrostructure):
        exists: ['min', '1', 'max', 'unbounded']
        doc: |
          Instances should use microstructure as a name prefix.
        time(NX_NUMBER):
        iteration(NX_INT):
        temperature(NX_FLOAT):
          unit: NX_TEMPERATURE
          doc: |
            Simulated temperature for this snapshot.
        grid(NXcg_grid):
          exists: optional
        crystal(NXmicrostructure_feature):
          representation:
            exists: recommended
          number_of_crystals(NX_UINT):
          number_of_phases(NX_UINT):
          index_offset_crystal(NX_INT):
          indices_crystal(NX_INT):
            dimensions:
              rank: 1
              dim: (n_grains,)
          index_offset_phase(NX_INT):
          indices_phase(NX_INT):
            dimensions:
              rank: 1
              dim: (n_grains,)
          area(NX_NUMBER):
            dimensions:
              rank: 1
              dim: (n_grains,)
          volume(NX_NUMBER):
            dimensions:
              rank: 1
              dim: (n_grains,)
        interface(NXmicrostructure_feature):
          exists: optional
          representation(NX_CHAR):
            exists: recommended
          number_of_interfaces(NX_UINT):
          index_offset_interface(NX_INT):
          indices_interface(NX_INT):
            dimensions:
              rank: 1
              dim: (n_interfaces,)
          indices_crystal(NX_INT):
            unit: NX_UNITLESS
            doc: |
              One pair of indices_crystal values for each interface.
            dimensions:
              rank: 2
              dim: (n_interfaces, 2)
            \@use_these(NX_CHAR):
          relative_mobility(NX_FLOAT):
            unit: NX_DIMENSIONLESS
            doc: |
              Mobility times surface energy density of the interface normalized
              to the maximum such product of the interface set.
            dimensions:
              rank: 1
              dim: (n_interfaces,)
          area(NX_NUMBER):
            dimensions:
              rank: 1
              dim: (n_interfaces,)
