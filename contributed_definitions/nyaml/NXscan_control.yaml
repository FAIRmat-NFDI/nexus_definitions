category: base
# Correction: region (use: phase space)
doc: |
  This group contains information about the scan control over a hyperdimensional space or 
  sub-space of an N-dimensional phase space in which the scan is performed.

  scan_types: 
        Trajectory: List of N-dimensional sequential vectors describing the trajectory line for a full scan.
        Mesh: In each dimension walking in a fixed phase space in a fixed direction. When a phase space
              or a subspace is scanned then a step in the next dimension is taken. As such we are 
              speaking about the fastest and slowest scan axis.
        Snake: A mesh scan where the scanning direction is reversed after each line. 
        Spiral: A spiral scan is a scan where the scanning direction is a spiral.
        Tilt: At each step, a proportional movement is done in all dimensions.

  Scan_control_types: 
      Stepping: Before the measurement at the scan points a movement to the given is performed. 
                Correction (for example backlash) or active regulation (feedback loop) may or 
                may not be applied.    
      Continuous: The scanning each line in an N-dimensional phase space is done without stopping.
      Oscillating: Scanning over a scan point continuously and then moving to start scanning on the next point.

type: group
NXscan_control(NXobject):
  scan_time_start(NX_DATE_TIME):
    doc: |
      The start time of the scan.
    unit: NX_TIME
  scan_time_end(NX_DATE_TIME):
    doc: |
      The end time of the scan.
    unit: NX_TIME
  independent_scan_axes:
    doc: |
      A list of independent scan axes are controlled independently of each other.
      (e.g. X, Y, Z, or other physical dimensions)

      The list is the order of axis of the scan from fastest to slowest.
  scan_resolution_N(NX_NUMBER):
    doc: |
      Define the scan resolution along each dimension. The number of steps per unit dimension parameters.

      Rename the field, according to the name of the independent dimension (e.g. scan_resolution_x, scan_resolution_voltage).
    unit: NX_ANY
  accuracy(NX_NUMBER):
    doc: |
      Define the accuracy of the scan and the value should be in [0, 1].
    unit: NX_LENGTH
  scan_type:
    doc: |
      The scan types are the types of scan that can be performed in trajectory, mesh, snake, 
      or spiral manner.
    enumeration: [trajectory, mesh, snake, spiral]
  scan_control_type:
    doc: |
      The scan control type is the type of control that can be applied to the scan in stepping, 
      continuous, or oscillating manner.
    enumeration: [stepping, continuous, oscillating]
  scan_region(NXobject):
    doc:
      The scan region (phase space or sub-phase space) is the region where the scan is performed. 
      The region could be N-dimensional and is defined by the minimum and maximum values of the scan axes.
    scan_offset(NX_NUMBER):
      doc: |
        The offset of the scan is the origin (a starting point where the subjective scan region will be started) 
        of the scan region (phase space or subphase space).
        
        For N-dimensional, it is a list of N numbers.
      dimensions:
        dim: [1, nD]
      unit: NX_ANY
    scan_range(NX_NUMBER):
      doc: |
        The range of the scan is the length of the scan region on each dimension.
        
        For N-dimensional, it is a list of N numbers.
      dimensions:
        dim: [1, nD]

      unit: NX_ANY
    scan_angle_N(NX_NUMBER):
      doc: |
        The orientation of the scan region or subspace. Usually, the scan_offset and scan_range are enough 
        to define the scan region. This field defines how the subspace is oriented in the N-dimensional space
        with respect to the frame of reference.
        
        Rename the field describing the angle with an axis of the phase space 
        or sub-phase space (e.g. scan_angle_X).
      unit: NX_ANGLE
  mesh_SCAN(NXobject):
    doc: |
      The mesh scan is a scan where the scanning direction is a meshed manner.
    scan_speed_N(NX_NUMBER):
      doc: |
        Define the scan speed in the forward direction along the axis.
        
        If the scan goes in the negative direction, the speed should be negative.

        Rename the field, according to the name of the dimension (e.g. scan_speed_x, scan_speed_voltage).
      unit: NX_ANY
    forward_speed_N(NX_NUMBER):
      doc: |
        Define the scan speed in the forward directions. 
        Rename the field, according to the name of the dimension.
      unit: NX_ANY
    backward_speed_N(NX_NUMBER):
      doc: |
        Define the scan speed in the backward directions. 
        Rename the field, according to the name of the dimension.
      unit: NX_ANY
    CHANNAL_NAME_N: 
      doc: |
        Name of the channel that records the scan data for the given dimension. The ending annotation 'N' is 
        to represent the name of the dimensions.

        Rename the field, according to the name of the channel and dimension (e.g. piezo_scanner_x).
    scan_points_N(NX_NUMBER):
      doc: |
        Define the total number of points in the given axis scan to be performed.
  
        Rename the field, according to the name of the dimension (e.g. scan_points_x, scan_points_voltage).
    stepping_N(NX_NUMBER):
      doc: |
        The number of steps the probe moves over the scan steps or points.

        Rename the field, according to the name of the dimension (e.g. stepping_x, stepping_voltage).
      \@frog_leap_scan(NX_BOOLEAN):
        doc: |
          If the scan probe jumps over a number of scan steps or points (more than one) 
          to perform each scan. By default, it is False.
    step_size_N(NX_NUMBER):
      doc: |
        The length of each step in the scan on each dimension.
        
        Rename the field, according to the name of the dimension (e.g. step_size_x, step_size_voltage).
      unit: NX_ANY

    continuous_N(NX_BOOLEAN):
      doc: |
        If the scan probe moves continuously over the scan points or steps, use True. The default value is False.
        Usually, continuous scanning is possible in one dimension. On other dimensions, the scan probe moves
        in a stepping manner.

        Rename the field, according to the name of the dimension (e.g. continuous_voltage).

    oscillating_N(NX_BOOLEAN):
      doc: |
        If the scan probe oscillates over the scan point, use True. 
        The default value is False.
      \@oscillation_frequency(NX_NUMBER):
        doc: |
          The number of oscillations on each scanning point per second.
      unit: NX_FREQUENCY
    SCAN_DATA(NXdata):
      data:
        doc: |
          The scan data is the data collected during the scan. 
          If the scan has several channels or derivatives from the channel data, please
          duplicate this NXdata group for each.

  # For spiral scan
  spiral_SCAN(NXobject): 
    doc: |
      To define the spiral or circular scan, use this group.
    scan_speed_N(NX_NUMBER):
      doc: |
        Define the scan speed in forward (clockwise) directions.
        
        If the scan goes in the negative (anti-clockwise) direction, the speed should be negative.

        Rename the field, according to the circle index. The circle near the center starts with 0.
        In case, the speed is the same for all the circles, replace 'N' by 'all'.
      unit: NX_ANY
      \@spiral_direction:
        doc: |
          Define the direction of the spiral scan. (e.g. clockwise, anticlockwise)
        enumeration: [clockwise, anticlockwise]
    forward_speed_N(NX_NUMBER):
      doc: |
        Define the scan speed in the forward (clockwise) directions. 
        Rename the field, according to the circle index. The circle near the center starts with 0.

        In case, the speed is the same for all the circles, replace 'N' by 'all'.
      unit: NX_ANY
    backward_speed_N(NX_NUMBER):
      unit: NX_ANY
      doc: |
        Define the scan speed in the backward (anti-clockwise) directions. 
        Rename the field, according to the circle index. The circle near the center starts with 0.

        In case, the speed is the same for all the circles, replace 'N' by 'all'.
    spiral_radius_N(NX_NUMBER):
      unit: NX_ANY
      doc: |
        Define the radius of the spiral circle of scanning.

        Rename the field, according to the circle order, the nearest circle to the center is 0.
    scan_points_N(NX_NUMBER):
      doc: |
        Define the total number of points in a given circle scan to be performed.
  
        Rename the field, according to the circle order, the nearest circle to the center 
        is 0 (e.g. scan_points_2).
    stepping_N(NX_NUMBER):
      doc: |
        If the scan probe steps over a number of scan points.

        Rename the field, according to the circle index. The circle near the center starts with 0.
        In case, the stepping is the same for all the circles, replace 'N' by 'all'. 
      \@frog_leap_scan(NX_BOOLEAN):
        doc: |
          If the scan probe jumps over a number of scan steps or points (more than one), use True.
          The default value is False.
    step_size_N(NX_NUMBER):
      doc: |
        Define the number of points that the scan probe steps over.

        Rename the field, according to the circle index. The circle near the center or lowest value of a 
        parameter starts with 0.
        In case, the step size is the same for all the circles, replace 'N' by 'all'.
      unit: NX_ANY
    continuous_N(NX_BOOLEAN):
      doc: |
        If the scan probe moves continuously over the scan points, use True. The default value is False.
        A scan process can run continuously in the spatial dimension but can be discretized in time or 
        other physical dimensions (e.g. voltage).

        Rename this field according to the dimensions, considering continuous scan in a two-dimensional space 
        rename the field as continuous_x_y.
    oscillating_N(NX_BOOLEAN):
      doc: |
        If the scan probe oscillates over the scan point, use True. The default value is False.
      \@oscillation_frequency(NX_NUMBER):
        doc: |
          Number of oscillation on each scanning point per second.
      unit: NX_FREQUENCY
    SCAN_DATA(NXdata):
      doc: |
        The scan data is the data collected during the scan. 
        If the scan has several channels or derivatives from the channel data, please
        duplicate this NXdata group for each.

  # This active_trajectory could be explained under the same group
  snake_SCAN(NXobject):
    doc: |
      To define the snake scan, use this group.

    scan_speed_N(NX_NUMBER):
      doc: |
        Define the scan speed for the type of snake scan. For the same speed along the
        positive and negative directions, use a single number

        Rename the field, according to the name of the fast and slow axis e.g. scan_speed_x.
      unit: NX_ANY
    forward_speed(NX_NUMBER):
      doc: |
        The field defines the scan speed in the positive direction on the fast axis.

        Rename the field, according to the name of the fast axis.
      unit: NX_ANY
    backward_speed(NX_NUMBER):
      doc: |
        The field defines the scan speed in the negative direction on the fast axis.

        Rename the field, according to the name of the fast axis.
      unit: NX_ANY
    scan_points_N(NX_NUMBER):
      doc: |
        Define the total number of points in the given axis scan to be performed.
  
        Rename the field, according to the name of the dimension (e.g. scan_points_x, scan_points_voltage).
    stepping_N(NX_NUMBER):
      doc: |
        The number of steps the probe moves over the scan steps or points.

        Rename the field, according to the name of the dimension (e.g. stepping_x, stepping_voltage).
      \@frog_leap_scan(NX_BOOLEAN):
        doc: |
          If the scan probe jumps over a number of scan steps or points (more than one) 
          to perform each scan. By default, it is False.

          Rename the field, according to the name of the dimension.
    step_size_N(NX_NUMBER):
      doc: |
        The length of each step in the scan on each dimension.
        
        Rename the field, according to the name of the dimension (e.g. step_size_x, step_size_voltage).
      unit: NX_ANY
    CHANNAL_NAME_N: 
      doc: |
        Name of the channel that records the scan data for the given dimension. The ending annotation 'N' is 
        to represent the name of the dimensions.

        Rename the field, according to the name of the channel and dimension (e.g. piezo_scanner_x).
    continuous_N(NX_BOOLEAN):
      doc: |
        If the scan probe moves continuously over the scan points or steps, use True. The default value is False.
        Usually, continuous scanning is possible in one dimension. On other dimensions, the scan probe moves
        in a stepping manner.

        Rename the field, according to the name of the dimension (e.g. continuous_voltage).

    oscillating_N(NX_BOOLEAN):
      doc: |
        If the scan probe oscillates over the scan point, use True. 
        The default value is False.
      \@oscillation_frequency(NX_NUMBER):
        doc: |
          The number of oscillations on each scanning point per second.
      unit: NX_FREQUENCY
    SCAN_DATA(NXdata):
      doc: |
        The scan data is the data collected during the scan. 
        If the scan has several channels or derivatives from the channel data, please
        duplicate this NXdata group for each.
  traj_SCAN(NXobject):
    doc: |
      To define the trajectory scan, use this group.
    scan_speed(NX_NUMBER):
      doc: |
        Define the scan speed through the trajectory points.
      unit: NX_ANY
    forward_speed(NX_NUMBER):
      doc: |
        The field defines the scan speed in the forward directions through the trajectory points. 
      unit: NX_ANY
    backward_speed(NX_NUMBER):
      doc: |
        The field defines the scan speed in the backward directions (backtracking) through the trajectory points. 
      unit: NX_ANY
    CHANNAL_NAME_N: 
      doc: |
        Name of the channel that records the scan data for the given dimension. The ending annotation 'N' is 
        to represent the name of the dimensions.

        Rename the field, according to the name of the channel and dimension (e.g. piezo_scanner_x).
    number_of_trajectory_points(NX_NUMBER):
      doc: |
        The number of trajectory points in the entire scan.
    trajectory_points(NX_NUMBER):
      doc: |
        The trajectory points are the N-dimensional vectors describing all the scan points sequentially.

        The second rank dataset should contain total number of trajectory points (nTraj) and 
        a full coordinate (nD) of each trajectory point.

      dimensions:
        rank: 2
        dim: [[1, nTraj], [2, nD]]
    scan_points_N(NX_NUMBER):
      doc: |
        Define the total number of scan points between two trajectory points.
  
        Rename the field, according to the index of the second trajectory points.
        For example, scan_points_1 is the number of points between the starting(zero) and first trajectory points.
    stepping_N(NX_NUMBER):
      doc: |
        The number of steps the probe moves over the scan steps or points along the trajectory line from between two trajectory points.

        Rename the field, according to the index of the second trajectory points.
        For example, scan_points_1 is the number of points between the starting(zero) and first trajectory points.
      \@frog_leap_scan(NX_BOOLEAN):
        doc: |
          If the scan probe jumps over a number of scan steps or points (more than one) 
          to perform each scan. By default, it is False.

    step_size(NX_NUMBER):
      doc: |
        The length of each step along the entire trajectory line.
      unit: NX_ANY
    continuous(NX_BOOLEAN):
      doc: |
        If the scan probe moves continuously over the scan points or steps between two trajectory points, use True. 
    oscillating_N(NX_BOOLEAN):
      doc: |
        If the scan probe oscillates over the scan point, use True. 
        The default value is False.
      \@oscillation_frequency(NX_NUMBER):
        doc: |
          The number of oscillations on each scanning point per second.
      unit: NX_FREQUENCY
    SCAN_DATA(NXdata):
      doc: |
        The scan data is the data collected during the scan. 
        If the scan has several channels or derivatives from the channel data, please
        duplicate this NXdata group for each.
 