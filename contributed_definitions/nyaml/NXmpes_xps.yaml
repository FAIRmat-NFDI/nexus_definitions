#lukas.pielsticker at cec.mpg.de, 04/2023
#Draft version of a NeXus application definition for XPS.

doc: This is the application definition for X-ray photoelectron spectroscopy.
category: application
NXmpes_xps(NXmpes):
  (NXentry):
    end_time(NX_DATE_TIME):
      exists: recommended
    definition(NX_CHAR):
      enumeration: ["NXmpes_xps"]
    (NXinstrument):
      energy_resolution(NX_FLOAT):
        exists: recommended   ###### cannot be required. measured value (typically from Ag 3d5/2 FWHM of sputter-cleaned Ag foil), not known every time and cann update over time (detector degradation).
        unit: NX_ENERGY
      manufacturer(NXfabrication):   #### should go to NXmpes at some point.
        exists: recommended
        vendor:
          exists: recommended
          enumeration: [
            "SPECS GmbH",
            "Kratos",
            "Physical Electronics",
            "Scienta",
            "Thermo Fischer Scientific",
          ]
        model:
          exists: recommended                  
      work_function(NX_FLOAT):
          exists: recommended   ###### new
          doc: "Work function of the spectrometer."
          unit: NX_ENERGY
      (NXsource):
        type(NX_CHAR):
          enumeration: [
            "Synchrotron X-ray Source",
            "Rotating Anode X-ray",
            "Fixed Tube X-ray",
            "UV Laser",
            "Free-Electron Laser",
            "UV Plasma Source",
            "Metal Jet X-ray",
          ]
        probe(NX_CHAR):
          doc: "Type of probe. In XPS it's always X-ray photons (or UV light in UPS), so the full NIAC list is restricted."
          enumeration: ["x-ray", "ultraviolet"]
      (NXelectronanalyser):
        (NXcollectioncolumn):
          scheme(NX_CHAR):
            enumeration: [     ### removed some options from NXmpes
              "Standard",
              "Angular dispersive",
              "Selective area",
              "Deflector",
            ]
          transmission_function(NX_FLOAT):
            exists: recommended
            doc: "Transmission function in dependance of the electron kinetic energy. To be used in intensity calibration."     ### does NX_FLOAT make sense?
        (NXenergydispersion):
          scheme(NX_CHAR):
            enumeration:    ### removed some options from NXmpes
              [
                "hemispherical",
                "double hemispherical",
                "cylindrical mirror",
                "display mirror",
                "retarding grid",
              ]
          energy_scan_mode(NX_CHAR):
            doc: "Way of scanning the energy axis."
            enumeration: [    ### could potentially add some more here.
              "fixed analyzer transmission",
              "fixed retarding ratio",
              "fixed energies",
              "snapshot",
              "imaging",
              "detector voltage scan",
              "constant final state",
              "constant initial state",
              ]          
          iris(NXaperture):
             exists: optional
          analyzer_radius(NX_FLOAT):
            exists: optional
            description: The radius of the hemispherical analyzer in mm (only if hemispherical analyzer is used.)
            unit: NX_LENGTH             
      (NXmanipulator):
        heater_type(NX_CHAR):
          exists: optional
          doc: "Method of heating the sample. Can be e.g. electron beam heating, laser, halogen lamp."
          enumeration: [    ### could potentially add some more here.
              "electron beam heating",
              "laser",
              "halogen lamp",
              ]
    (NXprocess):
        energy_calibration(NXcalibration):
          exists: optional
          calibration_file(NXnote):
            exists: optional
            doc: "Name of the calibration file containing the calibration data."     
        intensity_calibration(NXcalibration):
          exists: optional
          applied(NX_BOOLEAN):
            doc: "Has an intensity calibration been applied? That is, has the transmission function of the analyzer been taken into account?"
          transmission_function(NX_FLOAT):
            exists: recommended
            doc: "Transmission function of the electron collection column. This should be a link to /entry/instrument/collectioncolumn/tranmission_function."                  
        energy_reference(NXcalibration):
          exists: optional
          applied(NX_BOOLEAN):
            doc: "Have the energy axes been adjusted (e.g., in cases where samples are not conductive)?"
          emission_line(NX_CHAR):
            exists: recommended
            doc: "Emission line which was used for the calibration."
          offset(NX_FLOAT):
            exists: recommended
            doc: "Offset between measured binding energy and calibrated binding energy of the emission line."
          binding_energy(NX_FLOAT):
            exists: recommended
            doc: "The binding energy that the specified emission line appeared at, after adjusting the binding energy scale, in units of eV"            
          calibrated_axis(NX_FLOAT):
            exists: recommended
            doc: "This is the calibrated energy axis to be used for data plotting. This should be a link to /entry/data/energy."          ######????
    (NXsample):     
      form(NX_CHAR):
        exists: optional
        enumeration:
          [
            "foil",
            "single crystal",
            "pellet",
            "powder",
          ]
      gas_pressure(NX_FLOAT):   ######## Can be a single number or a log.
        unit: NX_PRESSURE
        doc: "In the case of a fixed pressure measurement this is the scalar pressure. In the case of an experiment in which pressure changes, or anyway it is recorded, this is an array of length m of pressures."
      gas_phase(NX_CHAR):
        exists: optional
        doc: "Description of the constituent gases of the gas phase."        
    (NXdata):
      \@axes(NX_CHAR):
        doc: "It should contain at least one axis called 'energy'."
      energy(NX_NUMBER):   #### how to represent this here?
        \@type(NX_CHAR):
          exists: recommended
          doc: "The calibrated energy axis can be either in binding or kinetic energy. "
          enumeration:
            [
              "kinetic",
              "binding"
            ]
        \@step_size(NX_FLOAT):
          exists: optional
          doc: "The step size between two consecutive energy values if the energy axis is evenly spaced."
      data(NX_NUMBER): # There is a block of numbers named data.
        doc: "Processed plottable data. Represents a measure of one- or more-dimensional photoemission counts, where
          the varied axis may be for example energy, spatial coordinate, pump-probe delay, temperature, etc.
          The axes traces should be linked to the actual encoder position in NXinstrument or calibrated axes in NXprocess."
        \@units(NX_ANY):
          exists: recommended
        \@long_name(NX_CHAR):
          exists: optional