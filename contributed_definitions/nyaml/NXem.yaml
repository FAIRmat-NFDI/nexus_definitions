category: application
doc: |
  Application definition for normalized representation of electron microscopy research.
  
  This application definition is a comprehensive, general description for the
  standardization of data and metadata collected using electron microscopy.
  
  NXem is designed to be used for documenting experiments or computer simulations in which
  controlled electron beams are used to study electron-beam matter interactions, explore
  physical mechanisms and phenomena, or to characterize materials with an electron microscope.
type: group
NXem(NXobject):
  (NXentry):
    exists: ['min', '1', 'max', 'unbounded']
    definition(NX_CHAR):
      enumeration: [NXem]
    profiling(NXcs_profiling):
      exists: optional
      doc: |
        The configuration of the software that was used to generate this NeXus file.
      (NXprogram):
        exists: ['min', '0', 'max', 'unbounded']
        doc: |
          A collection of all programs and libraries used to generate this NeXus file.
          Ideally, this would enable a binary recreation from the input data.
          
          Examples include the name and version of the libraries used to write the
          instance. Ideally, the software which writes these NXprogram instances
          also includes the version of the set of NeXus classes i.e. the specific set
          of base classes, application definitions, and contributed definitions
          with which the here described concepts can be resolved.
          
          For the `pynxtools library <https://github.com/FAIRmat-NFDI/pynxtools>`_
          which is used by the `NOMAD <https://nomad-lab.eu/nomad-lab>`_
          research data management system, it makes sense to store e.g. the GitHub
          repository commit and respective submodule references used.
          
          Instances can also be used to document the modules and libraries that
          are offered by the computational environment such as those parsed
          from conda or python virtualenv environments.
        program(NX_CHAR):
          \@version(NX_CHAR):
    identifier_experiment(NX_CHAR):
      exists: optional
      doc: |
        A (globally) unique persistent identifier for referring to this experiment.
    experiment_alias(NX_CHAR):
      exists: optional
      doc: |
        Alias (short name) which scientists can use to refer to this experiment.
    experiment_description(NX_CHAR):
      exists: optional
      doc: |
        Free-text description about the experiment.
        
        Users are strongly advised to parameterize the description of their experiment
        by using respective groups and fields and base classes instead of writing prose
        into the field.
    start_time(NX_DATE_TIME):
      doc: |
        ISO 8601 time code with local time zone offset to UTC information included
        when the microscope session started. If the application demands that time
        codes in this section of the application definition should only be used
        for specifying when the experiment was performed - and the exact
        duration is not relevant - use this start_time field.
        
        Often though it is useful to specify a time interval via setting both a start_time
        and an end_time because this enables software tools and users to collect a
        more detailed bookkeeping of the experiment.
        
        Users should be aware though that even using only start_time and end_time
        may not be sufficient to infer how long the experiment took or for how long
        data were acquired. To bookkeep more fine-grained timestamps over the
        course of the experiment is possible with start_time and end_time fields
        of respective :ref:`NXevent_data_em` instances.
    end_time(NX_DATE_TIME):
      exists: recommended
      doc: |
        ISO 8601 time code with local time zone offset to UTC included when
        the microscope session ended.
        
        See docstring of the start_time field to see how to use the
        start_time and end_time together.
    (NXcite):
      exists: ['min', '0', 'max', 'unbounded']
    (NXnote):
      exists: ['min', '0', 'max', 'unbounded']
      doc: |
        Collection of serialized resources associated with the experiment.
        Examples of such resources are files which are formatted using proprietary
        data models of technology partners as those generated by the control software
        of the microscope during the instrument session.
      type(NX_CHAR):
      file_name(NX_CHAR):
      checksum(NX_CHAR):
      algorithm(NX_CHAR):
    userID(NXuser):
      exists: ['min', '0', 'max', 'unbounded']
      nameType: partial
      doc: |
        Information about persons who performed or were involved in the microscope
        session or simulation run.
      identifierNAME(NX_CHAR):
        nameType: partial
        exists: recommended
        \@type(NX_CHAR):
      name(NX_CHAR):
        exists: optional
        doc: |
          Given (first) name and surname.
      affiliation(NX_CHAR):
        exists: optional
        doc: |
          Name of the affiliation at the point in time when the experiment was performed.
      address(NX_CHAR):
        exists: optional
        doc: |
          Postal address of the affiliation.
      email(NX_CHAR):
        exists: optional
        doc: |
          Email address at the point in time when the experiment was performed.
          
          Writing the most permanently used email is recommended.
      telephone_number(NX_CHAR):
        exists: optional
        doc: |
          Telephone number at the point in time when the experiment was performed.
      role(NX_CHAR):
        exists: optional
        doc: |
          User role at the point in time when the experiment was performed.
          
          Examples are technician operating the microscope, student, postdoc,
          principle investigator, or guest.
    sampleID(NXsample):
      exists: ['min', '1', 'max', 'unbounded']
      nameType: partial
      doc:
      - |
        A physical entity which contains material intended to be investigated.
        Sample and specimen are treated as de facto synonyms.
        Samples can be real or virtual ones as annotated via is_simulation.
      - |
        The suggested best practice is to call this group sample. In those cases when
        multiple samples need to be grouped inside one entry, these SAMPLE groups
        should be named using the prefix sample followed an index starting from 1, i.e.
        (sample1, sample2).
      - |
        There are at least two strategies how to store (meta)data when one analyzes multiple
        samples - not different ROIs on a single sample though - in one session.
      - |
        One strategy is to store each sample and its results under an own NXem/ENTRY.
        This is one of the most frequent use cases as during most sessions typically only a
        single sample is investigated. In this case the name of this group should be NXem/ENTRY/sample.
      - |
        If multiple samples are investigated storing each of them in their own ENTRY group eventually will
        demand unnecessary duplication of instrument details.
      - |
        This can be avoided by using another strategy for storing samples and their results.
        Namely, by using only one instance of NXem/ENTRY. That NXem/ENTRY should then be named,
        like in the previous case, NXem/entry1 and the samples should be named sample1, sample2, etc.,
        i.e. instances should use sample as a name prefix.
      - |
        In this case the collection of events should use identifier_sample to state clearly for which
        of the samples loaded the (characterization) event was detected.
      - |
        xref:
          spec: EMglossary
          term: Specimen
          url: https://purls.helmholtz-metadaten.de/emg/EMG_00000046
      is_simulation(NX_BOOLEAN):
        doc: |
          Qualifier whether the sample is a real (in which case is_simulation should be set to false)
          or a virtual one (in which case is_simulation should be set to true).
      physical_form:
        exists: recommended
        enumeration:
          open_enum: true
          items: [bulk, foil, thin_film, powder]
      identifier_sample(NX_CHAR):
        exists: recommended
        doc: |
          Ideally, (globally) unique persistent identifier which distinguishes this sample from all others
          and especially the predecessor/origin from where that sample was cut off. An example of cutting off
          is a steel sheet that is the parent sample from which a small portion was wire-eroded that
          represents the sample that was then prepared for characterization with an electron microscope.
          
          The terms sample and specimen are here considered as exact synonyms.
          
          This field must not be used for an alias for the sample name. Instead, use name.
          
          In cases where multiple specimens were loaded into the microscope, the identifier has to resolve
          the specific sample, whose results are stored by this :ref:`NXentry` instance, because a single
          NXentry should be used for the characterization of a single specimen.
          
          Details about the specimen preparation should be stored in resources referring to identifier_parent.
        \@type(NX_CHAR):
      identifier_parent(NX_CHAR):
        exists: recommended
        doc: |
          Identifier of the sample from which the sample was cut off or the string *None*.
          I.e. the parent to this sample.
          
          The purpose of this field is to support functionalities for tracking
          sample provenance in a research data management system.
        \@type(NX_CHAR):
      preparation_date(NX_DATE_TIME):
        doc: |
          ISO 8601 time code with local time zone offset to UTC information
          when the specimen was prepared.
          
          Ideally, report the end of the preparation, i.e. the last known timestamp when
          the measured specimen surface was actively prepared. Ideally, this matches
          the last timestamp that is mentioned in the digital resource pointed to by
          identifier_parent.
          
          Knowing when the specimen was exposed to e.g. specific atmosphere is especially
          required for material that is sensitive to the environment such as specimens that were
          charged with fast diffusing elements or short-lived radioactive tracers.
          
          Additional time stamps prior to preparation_date are better placed in resources which
          describe but do not pollute the description here with prose. Resolving these
          connected metadata is considered the responsibility of the research data management
          system and not the a NeXus file.
      name(NX_CHAR):
        exists: recommended
        doc: |
          Specimen name
      atom_types(NX_CHAR):
        doc: |
          List of comma-separated elements from the periodic table that are contained in the sample.
          If the sample substance has multiple components, all elements from each component
          must be included in atom_types.
          
          The purpose of the field is to offer research data management systems an opportunity
          to parse the relevant elements without having to interpret these from the resources
          pointed to by identifier_parent or walk through eventually deeply nested groups in
          individual data instances.
      thickness(NX_NUMBER):
        exists: optional
        unit: NX_LENGTH
        doc: |
          (Measured) sample thickness.
          
          The information is recorded to qualify if the beam used was likely
          able to shine through the specimen. For scanning electron microscopy,
          in many cases the specimen is typically thicker than what is
          illuminatable by the electron beam.
          
          In this case the value should be set to the actual thickness of the specimen
          viewed for an illumination situation where the nominal surface normal of the
          specimen is parallel to the optical axis.
      density(NX_NUMBER):
        exists: optional
        unit: NX_ANY
        doc: |
          (Measured) density of the specimen.
          
          For multi-layered specimens this field should only be used to describe
          the density of the excited volume. For scanning electron microscopy
          the usage of this field is discouraged and instead an instance of a
          region-of-interest connected to individual :ref:`NXevent_data_em`
          instances can provide a cleaner description of the relevant details.
      description(NX_CHAR):
        exists: optional
        doc: |
          Discouraged free-text field to provide further detail.
    consistent_rotations(NXparameters):
      exists: recommended
      doc: |
        The conventions used when reporting crystal orientations.
        We follow the best practices of the Material Science community
        that are defined in reference `<https://doi.org/10.1088/0965-0393/23/8/083501>`_.
      rotation_handedness(NX_CHAR):
        doc: |
          Convention how a positive rotation angle is defined when viewing
          from the end of the rotation unit vector towards its origin.
          This is in accordance with convention 2 of reference `<https://doi.org/10.1088/0965-0393/23/8/083501>`_.
          
          Counter_clockwise is equivalent to a right-handed choice.
          Clockwise is equivalent to a left-handed choice.
        enumeration: [counter_clockwise, clockwise]
      rotation_convention(NX_CHAR):
        doc: |
          How are rotations interpreted into an orientation according to convention 3
          of reference `<https://doi.org/10.1088/0965-0393/23/8/083501>`_.
        enumeration: [passive, active]
      euler_angle_convention(NX_CHAR):
        doc: |
          How are Euler angles interpreted given that there are several choices (e.g. zxz, xyz)
          according to convention 4 of reference `<https://doi.org/10.1088/0965-0393/23/8/083501>`_.
          
          The most frequently used convention is zxz, which is based on the work of H.-J. Bunge
          but other conventions are possible. Apart from undefined, proper Euler angles
          are distinguished from (improper) Tait-Bryan angles.
        enumeration: [zxz, xyx, yzy, zyz, xzx, yxy, xyz, yzx, zxy, xzy, zyx, yxz]
      axis_angle_convention(NX_CHAR):
        doc: |
          To which angular range is the rotation angle argument of an
          axis-angle pair parameterization constrained according to
          convention 5 of reference `<https://doi.org/10.1088/0965-0393/23/8/083501>`_.
        enumeration: [rotation_angle_on_interval_zero_to_pi]
      sign_convention(NX_CHAR):
        doc: |
          Which sign convention is followed when converting orientations
          between different parametrizations/representations according
          to convention 6 of reference `<https://doi.org/10.1088/0965-0393/23/8/083501>`_.
        enumeration: [p_plus_one, p_minus_one]
    (NXcoordinate_system):
      exists: ['min', '1', 'max', 'unbounded']
      alias(NX_CHAR):
        exists: optional
      type(NX_CHAR):
      handedness(NX_CHAR):
      origin(NX_CHAR):
    processing_reference_frame(NXcoordinate_system):
      exists: recommended
      alias(NX_CHAR):
        exists: optional
      type(NX_CHAR):
      handedness(NX_CHAR):
      origin(NX_CHAR):
        exists: recommended
        doc: |
          Location of the origin of the processing_reference_frame.
          
          It is assumed that regions-of-interest in this reference frame form a rectangle or cuboid.
          Edges are interpreted by inspecting the direction of their outer unit normals
          (which point either parallel or antiparallel) along respective base vector direction
          of the reference frame.
          
          If any of these assumptions is not met, the user is required to explicitly state this.
        enumeration:
          open_enum: true
          items: [front_top_left, front_top_right, front_bottom_right, front_bottom_left, back_top_left, back_top_right, back_bottom_right, back_bottom_left]
      x_direction(NX_CHAR):
        exists: recommended
        doc: |
          Direction of the positively pointing x-axis base vector of the
          processing_reference_frame.
        enumeration:
          open_enum: true
          items: [north, east, south, west, in, out]
      y_direction(NX_CHAR):
        exists: recommended
        doc: |
          Direction of the positively pointing y-axis base vector of the
          processing_reference_frame.
        enumeration:
          open_enum: true
          items: [north, east, south, west, in, out]
      z_direction(NX_CHAR):
        exists: recommended
        doc: |
          Direction of the positively pointing z-axis base vector of the
          processing_reference_frame.
        enumeration:
          open_enum: true
          items: [north, east, south, west, in, out]
    sample_reference_frame(NXcoordinate_system):
      exists: recommended
      depends_on(NX_CHAR):
        exists: optional
        doc: |
          Reference to the specifically named :ref:`NXsample` instance(s) for
          which these conventions apply (e.g. /entry1/sample1).
      alias(NX_CHAR):
        exists: optional
      type(NX_CHAR):
      handedness(NX_CHAR):
      origin(NX_CHAR):
        exists: recommended
        doc: |
          Location of the origin of the sample_reference_frame.
          
          It is assumed that regions-of-interest in this reference frame form a rectangle or cuboid.
          Edges are interpreted by inspecting the direction of their outer unit normals
          (which point either parallel or antiparallel) along respective base vector direction
          of the reference frame.
          
          If any of these assumptions is not met, the user is required to explicitly state this.
        enumeration:
          open_enum: true
          items: [front_top_left, front_top_right, front_bottom_right, front_bottom_left, back_top_left, back_top_right, back_bottom_right, back_bottom_left]
      x_direction(NX_CHAR):
        exists: recommended
        doc: |
          Direction of the positively pointing x-axis base vector of the
          sample_reference_frame.
        enumeration:
          open_enum: true
          items: [north, east, south, west, in, out]
      y_direction(NX_CHAR):
        exists: recommended
        doc: |
          Direction of the positively pointing y-axis base vector of the
          sample_reference_frame.
        enumeration:
          open_enum: true
          items: [north, east, south, west, in, out]
      z_direction(NX_CHAR):
        exists: recommended
        doc: |
          Direction of the positively pointing z-axis base vector of the
          sample_reference_frame.
        enumeration:
          open_enum: true
          items: [north, east, south, west, in, out]
    detector_reference_frameID(NXcoordinate_system):
      nameType: partial
      exists: ['min', '0', 'max', 'unbounded']
      doc: |
        The reference frame that is defined by a specific detector.
      depends_on(NX_CHAR):
        exists: optional
        doc: |
          Reference to the specifically named :ref:`NXdetector` instance for
          which these conventions apply (e.g. /entry1/instrument/detector1).
      alias(NX_CHAR):
        exists: optional
      type(NX_CHAR):
      handedness(NX_CHAR):
      origin(NX_CHAR):
        exists: recommended
        doc: |
          Location of the origin of the detector_reference_frame.
          
          If the regions-of-interest forms a rectangle or cuboid, it is assumed that edges are interpreted
          by inspecting the direction of their outer unit normals (which point either parallel or antiparallel)
          along respective base vector direction of the reference frame.
          
          If any of these assumptions is not met, the user is required to explicitly state this.
        enumeration:
          open_enum: true
          items: [front_top_left, front_top_right, front_bottom_right, front_bottom_left, back_top_left, back_top_right, back_bottom_right, back_bottom_left]
      x_direction(NX_CHAR):
        exists: recommended
        doc: |
          Direction of the positively pointing x-axis base vector of the
          detector_reference_frame.
        enumeration:
          open_enum: true
          items: [north, east, south, west, in, out]
      y_direction(NX_CHAR):
        exists: recommended
        doc: |
          Direction of the positively pointing y-axis base vector of the
          detector_reference_frame.
        enumeration:
          open_enum: true
          items: [north, east, south, west, in, out]
      z_direction(NX_CHAR):
        exists: recommended
        doc: |
          Direction of the positively pointing z-axis base vector of the
          detector_reference_frame.
        enumeration:
          open_enum: true
          items: [north, east, south, west, in, out]
    measurement(NXem_measurement):
      exists: optional
      instrument(NXinstrument_em):
        name(NX_CHAR):
          exists: recommended
        location(NX_CHAR):
          exists: recommended
        type(NX_CHAR):
          exists: recommended
        fabrication(NXfabrication):
          vendor(NX_CHAR):
          model(NX_CHAR):
          serial_number(NX_CHAR):
            exists: recommended
        programID(NXprogram):
          exists: recommended
          nameType: partial
          doc: |
            Details about the control program used for operating the microscope.
          program(NX_CHAR):
            \@version(NX_CHAR):
        ebeam_column(NXebeam_column):
          fabrication(NXfabrication):
            exists: optional
            vendor(NX_CHAR):
            model(NX_CHAR):
            serial_number(NX_CHAR):
              exists: recommended
          electron_source(NXsource):
            exists: recommended
            emitter_type(NX_CHAR):
            probe(NX_CHAR):
              exists: optional
            
            # voltage like all other dynamic quantities should better be placed in instances of NXevent_data_em
            fabrication(NXfabrication):
              exists: optional
              vendor(NX_CHAR):
              model(NX_CHAR):
              serial_number(NX_CHAR):
                exists: recommended
          lensID(NXlens_em):
            exists: ['min', '0', 'max', 'unbounded']
            nameType: partial
            name(NX_CHAR):
            fabrication(NXfabrication):
              exists: optional
              vendor(NX_CHAR):
              model(NX_CHAR):
              serial_number(NX_CHAR):
                exists: recommended
          apertureID(NXaperture):
            exists: ['min', '0', 'max', 'unbounded']
            nameType: partial
            name(NX_CHAR):
            fabrication(NXfabrication):
              exists: optional
              vendor(NX_CHAR):
              model(NX_CHAR):
              serial_number(NX_CHAR):
                exists: recommended
          monochromatorID(NXmonochromator):
            exists: ['min', '0', 'max', 'unbounded']
            nameType: partial
            type(NX_CHAR):
            fabrication(NXfabrication):
              exists: optional
              vendor(NX_CHAR):
              model(NX_CHAR):
              serial_number(NX_CHAR):
                exists: recommended
          corrector_cs(NXcorrector_cs):
            exists: ['min', '0', 'max', '1']
            fabrication(NXfabrication):
              exists: recommended
              vendor(NX_CHAR):
              model(NX_CHAR):
              serial_number(NX_CHAR):
                exists: recommended
          corrector_ax(NXcomponent):
            exists: ['min', '0', 'max', '1']
            fabrication(NXfabrication):
              exists: optional
              vendor(NX_CHAR):
              model(NX_CHAR):
              serial_number(NX_CHAR):
                exists: recommended
          biprismID(NXcomponent):
            nameType: partial
            exists: ['min', '0', 'max', '1']
            fabrication(NXfabrication):
              exists: recommended
              vendor(NX_CHAR):
              model(NX_CHAR):
              serial_number(NX_CHAR):
                exists: recommended
          phaseplateID(NXcomponent):
            nameType: partial
            exists: ['min', '0', 'max', 'unbounded']
            type(NX_CHAR):
            fabrication(NXfabrication):
              exists: recommended
              vendor(NX_CHAR):
              model(NX_CHAR):
              serial_number(NX_CHAR):
                exists: recommended
          sensorID(NXsensor):
            nameType: partial
            exists: ['min', '0', 'max', 'unbounded']
          actuatorID(NXactuator):
            nameType: partial
            exists: ['min', '0', 'max', 'unbounded']
          beamID(NXbeam):
            nameType: partial
            exists: ['min', '0', 'max', 'unbounded']
          deflectorID(NXdeflector):
            nameType: partial
            exists: ['min', '0', 'max', 'unbounded']
        ibeam_column(NXibeam_column):
          exists: ['min', '0', 'max', '1']
          
          # there are tri-beam SEMs, but with a laser for which one should add NXsource
          # fabrication groups often were not made recommended or required because in practice
          # often scientific groups buy a commercial microscope for which the type and serial number
          # of the microscope (as in the top-level fabrication of instrument) suffices to recover
          # which components that microscope was built from
          fabrication(NXfabrication):
            exists: optional
            vendor(NX_CHAR):
            model(NX_CHAR):
            serial_number(NX_CHAR):
              exists: recommended
          ion_source(NXsource):
            emitter_type(NX_CHAR):
            probe(NXatom):
            fabrication(NXfabrication):
              exists: optional
              vendor(NX_CHAR):
              model(NX_CHAR):
              serial_number(NX_CHAR):
                exists: recommended
          lensID(NXlens_em):
            nameType: partial
            exists: ['min', '0', 'max', 'unbounded']
            name(NX_CHAR):
            fabrication(NXfabrication):
              exists: optional
              vendor(NX_CHAR):
              model(NX_CHAR):
              serial_number(NX_CHAR):
                exists: recommended
          apertureID(NXaperture):
            nameType: partial
            exists: ['min', '0', 'max', 'unbounded']
            name(NX_CHAR):
            fabrication(NXfabrication):
              exists: optional
              vendor(NX_CHAR):
              model(NX_CHAR):
              serial_number(NX_CHAR):
                exists: recommended
          monochromatorID(NXmonochromator):
            nameType: partial
            exists: ['min', '0', 'max', 'unbounded']
            fabrication(NXfabrication):
              exists: optional
              vendor(NX_CHAR):
              model(NX_CHAR):
              serial_number(NX_CHAR):
                exists: recommended
          
          # device for correcting axial astigmatism of ion beam?
          sensorID(NXsensor):
            nameType: partial
            exists: ['min', '0', 'max', 'unbounded']
          actuatorID(NXactuator):
            nameType: partial
            exists: ['min', '0', 'max', 'unbounded']
          beamID(NXbeam):
            nameType: partial
            exists: ['min', '0', 'max', 'unbounded']
          deflectorID(NXdeflector):
            nameType: partial
            exists: ['min', '0', 'max', 'unbounded']
        detectorID(NXdetector):
          nameType: partial
          exists: ['min', '0', 'max', 'unbounded']
          name(NX_CHAR):
          fabrication(NXfabrication):
            exists: recommended
            vendor(NX_CHAR):
            model(NX_CHAR):
            serial_number(NX_CHAR):
              exists: recommended
        scan_controller(NXscanbox_em):
          exists: optional
          fabrication(NXfabrication):
            exists: recommended
            vendor(NX_CHAR):
            model(NX_CHAR):
            serial_number(NX_CHAR):
              exists: recommended
        stage(NXmanipulator):
          exists: ['min', '0', 'max', 'unbounded']
          design(NX_CHAR):
            exists: recommended
          
          # add enumeration values from old NXstage_lab
          fabrication(NXfabrication):
            exists: recommended
            vendor(NX_CHAR):
            model(NX_CHAR):
            serial_number(NX_CHAR):
              exists: recommended
        nanoprobe(NXmanipulator):
          exists: optional
          fabrication(NXfabrication):
            exists: recommended
            vendor(NX_CHAR):
            model(NX_CHAR):
            serial_number(NX_CHAR):
              exists: recommended
        pumpID(NXpump):
          nameType: partial
          exists: ['min', '0', 'max', 'unbounded']
          design(NX_CHAR):
        sensorID(NXsensor):
          nameType: partial
          exists: ['min', '0', 'max', 'unbounded']
        actuatorID(NXactuator):
          nameType: partial
          exists: ['min', '0', 'max', 'unbounded']
      eventID(NXevent_data_em):
        nameType: partial
        exists: ['min', '0', 'max', 'unbounded']
        start_time(NX_DATE_TIME):
          exists: recommended
        end_time(NX_DATE_TIME):
          exists: recommended
        identifier_sample(NX_CHAR):
          exists: recommended
        
        # above field is another example for lacking support to define conditional existence constraints
        imageID(NXimage):
          exists: ['min', '0', 'max', 'unbounded']
          nameType: partial
          (NXprocess):
            exists: recommended
            input(NXnote):
              exists: recommended
              type(NX_CHAR):
              file_name(NX_CHAR):
              checksum(NX_CHAR):
              algorithm(NX_CHAR):
              context(NX_CHAR):
            detector_identifier(NX_CHAR):
          image_1d(NXdata):
            exists: optional
            \@signal(NX_CHAR):
            \@axes(NX_CHAR):
            \@AXISNAME_indices(NX_UINT):
              nameType: partial
            title(NX_CHAR):
              exists: recommended
            real(NX_NUMBER):
              \@long_name(NX_CHAR):
            imag(NX_NUMBER):
              exists: optional
              \@long_name(NX_CHAR):
            magnitude(NX_NUMBER):
              exists: optional
              \@long_name(NX_CHAR):
            intensity(NX_COMPLEX):
              exists: optional
              \@long_name(NX_CHAR):
            axis_i(NX_NUMBER):
              \@long_name(NX_CHAR):
          image_2d(NXdata):
            exists: optional
            \@signal(NX_CHAR):
            \@axes(NX_CHAR):
            \@AXISNAME_indices(NX_UINT):
              nameType: partial
            title(NX_CHAR):
              exists: recommended
            real(NX_NUMBER):
              \@long_name(NX_CHAR):
            imag(NX_NUMBER):
              exists: optional
              \@long_name(NX_CHAR):
            magnitude(NX_NUMBER):
              exists: optional
              \@long_name(NX_CHAR):
            intensity(NX_COMPLEX):
              exists: optional
              \@long_name(NX_CHAR):
            axis_j(NX_NUMBER):
              \@long_name(NX_CHAR):
            axis_i(NX_NUMBER):
              \@long_name(NX_CHAR):
          image_3d(NXdata):
            exists: optional
            \@signal(NX_CHAR):
            \@axes(NX_CHAR):
            \@AXISNAME_indices(NX_UINT):
              nameType: partial
            title(NX_CHAR):
              exists: recommended
            real(NX_NUMBER):
              \@long_name(NX_CHAR):
            imag(NX_NUMBER):
              exists: optional
              \@long_name(NX_CHAR):
            magnitude(NX_NUMBER):
              exists: optional
              \@long_name(NX_CHAR):
            intensity(NX_COMPLEX):
              exists: optional
              \@long_name(NX_CHAR):
            axis_k(NX_NUMBER):
              \@long_name(NX_CHAR):
            axis_j(NX_NUMBER):
              \@long_name(NX_CHAR):
            axis_i(NX_NUMBER):
              \@long_name(NX_CHAR):
          stack_1d(NXdata):
            exists: optional
            \@signal(NX_CHAR):
            \@axes(NX_CHAR):
            \@AXISNAME_indices(NX_UINT):
              nameType: partial
            title(NX_CHAR):
              exists: recommended
            real(NX_NUMBER):
              \@long_name(NX_CHAR):
            imag(NX_NUMBER):
              exists: optional
              \@long_name(NX_CHAR):
            magnitude(NX_NUMBER):
              exists: optional
              \@long_name(NX_CHAR):
            intensity(NX_NUMBER):
              exists: optional
              \@long_name(NX_CHAR):
            indices_group(NX_INT):
              exists: optional
              \@long_name(NX_CHAR):
            indices_image(NX_INT):
              \@long_name(NX_CHAR):
            axis_i(NX_NUMBER):
              \@long_name(NX_CHAR):
          stack_2d(NXdata):
            exists: optional
            \@signal(NX_CHAR):
            \@axes(NX_CHAR):
            \@AXISNAME_indices(NX_UINT):
              nameType: partial
            title(NX_CHAR):
              exists: recommended
            real(NX_NUMBER):
              \@long_name(NX_CHAR):
            imag(NX_NUMBER):
              exists: optional
              \@long_name(NX_CHAR):
            magnitude(NX_NUMBER):
              exists: optional
              \@long_name(NX_CHAR):
            intensity(NX_NUMBER):
              exists: optional
              \@long_name(NX_CHAR):
            indices_group(NX_INT):
              exists: optional
              \@long_name(NX_CHAR):
            indices_image(NX_INT):
              \@long_name(NX_CHAR):
            axis_j(NX_NUMBER):
              \@long_name(NX_CHAR):
            axis_i(NX_NUMBER):
              \@long_name(NX_CHAR):
          stack_3d(NXdata):
            exists: optional
            \@signal(NX_CHAR):
            \@axes(NX_CHAR):
            \@AXISNAME_indices(NX_UINT):
              nameType: partial
            title(NX_CHAR):
              exists: recommended
            real(NX_NUMBER):
              \@long_name(NX_CHAR):
            imag(NX_NUMBER):
              exists: optional
              \@long_name(NX_CHAR):
            magnitude(NX_NUMBER):
              exists: optional
              \@long_name(NX_CHAR):
            intensity(NX_NUMBER):
              exists: optional
              \@long_name(NX_CHAR):
            indices_group(NX_INT):
              exists: optional
              \@long_name(NX_CHAR):
            indices_image(NX_INT):
              \@long_name(NX_CHAR):
            axis_k(NX_NUMBER):
              \@long_name(NX_CHAR):
            axis_j(NX_NUMBER):
              \@long_name(NX_CHAR):
            axis_i(NX_NUMBER):
              \@long_name(NX_CHAR):
        spectrumID(NXspectrum):
          exists: ['min', '0', 'max', 'unbounded']
          nameType: partial
          (NXprocess):
            exists: recommended
            input(NXnote):
              exists: recommended
              type(NX_CHAR):
              file_name(NX_CHAR):
              checksum(NX_CHAR):
              algorithm(NX_CHAR):
              context(NX_CHAR):
            detector_identifier(NX_CHAR):
          spectrum_0d(NXdata):
            exists: optional
            \@signal(NX_CHAR):
            \@axes(NX_CHAR):
            \@AXISNAME_indices(NX_UINT):
              nameType: partial
            title(NX_CHAR):
              exists: recommended
            intensity(NX_NUMBER):
              \@long_name(NX_CHAR):
            axis_energy(NX_NUMBER):
              \@long_name(NX_CHAR):
          spectrum_1d(NXdata):
            exists: optional
            \@signal(NX_CHAR):
            \@axes(NX_CHAR):
            \@AXISNAME_indices(NX_UINT):
              nameType: partial
            title(NX_CHAR):
              exists: recommended
            intensity(NX_NUMBER):
              \@long_name(NX_CHAR):
            axis_i(NX_NUMBER):
              \@long_name(NX_CHAR):
            axis_energy(NX_NUMBER):
              \@long_name(NX_CHAR):
          spectrum_2d(NXdata):
            exists: optional
            \@signal(NX_CHAR):
            \@axes(NX_CHAR):
            \@AXISNAME_indices(NX_UINT):
              nameType: partial
            title(NX_CHAR):
              exists: recommended
            intensity(NX_NUMBER):
              \@long_name(NX_CHAR):
            axis_j(NX_NUMBER):
              \@long_name(NX_CHAR):
            axis_i(NX_NUMBER):
              \@long_name(NX_CHAR):
            axis_energy(NX_NUMBER):
              \@long_name(NX_CHAR):
          spectrum_3d(NXdata):
            exists: optional
            \@signal(NX_CHAR):
            \@axes(NX_CHAR):
            \@AXISNAME_indices(NX_UINT):
              nameType: partial
            title(NX_CHAR):
              exists: recommended
            intensity(NX_NUMBER):
              \@long_name(NX_CHAR):
            axis_k(NX_NUMBER):
              \@long_name(NX_CHAR):
            axis_j(NX_NUMBER):
              \@long_name(NX_CHAR):
            axis_i(NX_NUMBER):
              \@long_name(NX_CHAR):
            axis_energy(NX_NUMBER):
              \@long_name(NX_CHAR):
          stack_0d(NXdata):
            exists: optional
            \@signal(NX_CHAR):
            \@axes(NX_CHAR):
            \@AXISNAME_indices(NX_UINT):
              nameType: partial
            title(NX_CHAR):
              exists: recommended
            intensity(NX_NUMBER):
              \@long_name(NX_CHAR):
            indices_spectrum(NX_INT):
              \@long_name(NX_CHAR):
            axis_energy(NX_NUMBER):
              \@long_name(NX_CHAR):
          stack_1d(NXdata):
            exists: optional
            \@signal(NX_CHAR):
            \@axes(NX_CHAR):
            \@AXISNAME_indices(NX_UINT):
              nameType: partial
            title(NX_CHAR):
              exists: recommended
            intensity(NX_NUMBER):
              \@long_name(NX_CHAR):
            indices_spectrum(NX_INT):
              \@long_name(NX_CHAR):
            axis_i(NX_NUMBER):
              \@long_name(NX_CHAR):
            axis_energy(NX_NUMBER):
              \@long_name(NX_CHAR):
          stack_2d(NXdata):
            exists: optional
            \@signal(NX_CHAR):
            \@axes(NX_CHAR):
            \@AXISNAME_indices(NX_UINT):
              nameType: partial
            title(NX_CHAR):
              exists: recommended
            intensity(NX_NUMBER):
              \@long_name(NX_CHAR):
            indices_spectrum(NX_INT):
              \@long_name(NX_CHAR):
            axis_j(NX_NUMBER):
              \@long_name(NX_CHAR):
            axis_i(NX_NUMBER):
              \@long_name(NX_CHAR):
            axis_energy(NX_NUMBER):
              \@long_name(NX_CHAR):
          stack_3d(NXdata):
            exists: optional
            \@signal(NX_CHAR):
            \@axes(NX_CHAR):
            \@AXISNAME_indices(NX_UINT):
              nameType: partial
            title(NX_CHAR):
              exists: recommended
            intensity(NX_NUMBER):
              \@long_name(NX_CHAR):
            indices_spectrum(NX_INT):
              \@long_name(NX_CHAR):
            axis_k(NX_NUMBER):
              \@long_name(NX_CHAR):
            axis_j(NX_NUMBER):
              \@long_name(NX_CHAR):
            axis_i(NX_NUMBER):
              \@long_name(NX_CHAR):
            axis_energy(NX_NUMBER):
              \@long_name(NX_CHAR):
        instrument(NXinstrument_em):
          exists: recommended
          ebeam_column(NXebeam_column):
            operation_mode(NX_CHAR):
            electron_source(NXsource):
              exists: optional
              voltage(NX_NUMBER):
              extraction_voltage(NX_NUMBER):
                exists: optional
              emission_current(NX_NUMBER):
                exists: optional
              filament_current(NX_NUMBER):
                exists: optional
            lensID(NXlens_em):
              nameType: partial
              exists: ['min', '0', 'max', 'unbounded']
              power_setting(NX_CHAR_OR_NUMBER):
            apertureID(NXaperture):
              nameType: partial
              exists: ['min', '0', 'max', 'unbounded']
              setting(NX_CHAR_OR_NUMBER):
                exists: recommended
                doc: |
                  Descriptor for the aperture setting when the exact technical details
                  are unknown or not directly controllable as the control software of
                  the microscope does not enable or was not configured to display these
                  values for users.
            
            # NXaperture/size can be used as a fallback
            monochromatorID(NXmonochromator):
              nameType: partial
              exists: ['min', '0', 'max', 'unbounded']
              applied(NX_BOOLEAN):
              dispersion(NX_NUMBER):
                exists: recommended
              voltage(NX_NUMBER):
                exists: recommended
            corrector_cs(NXcorrector_cs):
              exists: ['min', '0', 'max', '1']
              applied(NX_BOOLEAN):
                exists: recommended
              tableauID(NXprocess):
                nameType: partial
                exists: ['min', '1', 'max', 'unbounded']
                
                # model(NX_CHAR):
                
                # ceos
                c_1(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                a_1(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                b_2(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                a_2(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                c_3(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                s_3(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                a_3(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                b_4(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                d_4(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                a_4(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                c_5(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                s_5(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                r_5(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                a_6(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                
                # nion
                c_1_0(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                c_1_2_a(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                c_1_2_b(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                c_2_1_a(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                c_2_1_b(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                c_2_3_a(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                c_2_3_b(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                c_3_0(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                c_3_2_a(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                c_3_2_b(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                c_3_4_a(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                c_3_4_b(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                c_4_1_a(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                c_4_1_b(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                c_4_3_a(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                c_4_3_b(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                c_4_5_a(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                c_4_5_b(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                c_5_0(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                c_5_2_a(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                c_5_2_b(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                c_5_4_a(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                c_5_4_b(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                c_5_6_a(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
                c_5_6_b(NXaberration):
                  exists: optional
                  magnitude(NX_NUMBER):
            
            # we could write down how to store the aberrations but we should not force to add aberrations
            # basically optional use of NXaberration therein at least some value required
            corrector_ax(NXcomponent):
              exists: ['min', '0', 'max', '1']
              applied(NX_BOOLEAN):
              value_x(NX_NUMBER):
              value_y(NX_NUMBER):
            
            # biprism(NXcomponent):
            
            # phaseplateID(NXcomponent):
            sensorID(NXsensor):
              nameType: partial
              exists: ['min', '0', 'max', 'unbounded']
            actuatorID(NXactuator):
              nameType: partial
              exists: ['min', '0', 'max', 'unbounded']
            beamID(NXbeam):
              nameType: partial
              exists: ['min', '0', 'max', 'unbounded']
            deflectorID(NXdeflector):
              nameType: partial
              exists: ['min', '0', 'max', 'unbounded']
          ibeam_column(NXibeam_column):
            exists: ['min', '0', 'max', '1']
            ion_source(NXsource):
              probe(NXatom):
              voltage(NX_NUMBER):
              flux(NX_NUMBER):
            lensID(NXlens_em):
              nameType: partial
              exists: ['min', '0', 'max', 'unbounded']
              power_setting(NX_CHAR_OR_NUMBER):
            apertureID(NXaperture):
              nameType: partial
              exists: ['min', '0', 'max', 'unbounded']
              setting(NX_CHAR_OR_NUMBER):
                doc: |
                  Descriptor for the aperture setting when the exact technical details
                  are unknown or not directly controllable as the control software of
                  the microscope does not enable or was not configured to display these
                  values for users.
            monochromatorID(NXmonochromator):
              nameType: partial
              exists: ['min', '0', 'max', 'unbounded']
              applied(NX_BOOLEAN):
            sensorID(NXsensor):
              nameType: partial
              exists: ['min', '0', 'max', 'unbounded']
            actuatorID(NXactuator):
              nameType: partial
              exists: ['min', '0', 'max', 'unbounded']
            beamID(NXbeam):
              nameType: partial
              exists: ['min', '0', 'max', 'unbounded']
            deflectorID(NXdeflector):
              nameType: partial
              exists: ['min', '0', 'max', 'unbounded']
          detectorID(NXdetector):
            nameType: partial
            exists: ['min', '0', 'max', 'unbounded']
            mode(NX_CHAR):
              doc: |
                Operation mode of the detector as displayed by the control software.
          scan_controller(NXscanbox_em):
            exists: optional
            scan_schema(NX_CHAR):
            dwell_time(NX_NUMBER):
          sensorID(NXsensor):
            nameType: partial
            exists: ['min', '0', 'max', 'unbounded']
          actuatorID(NXactuator):
            nameType: partial
            exists: ['min', '0', 'max', 'unbounded']
          stage(NXmanipulator):
            exists: ['min', '0', 'max', 'unbounded']
            design(NX_CHAR):
              exists: recommended
            tilt1(NX_NUMBER):
            tilt2(NX_NUMBER):
            rotation(NX_NUMBER):
            position(NX_NUMBER):
            sample_heater(NXactuator):
              exists: optional
              physical_quantity(NX_CHAR):
              heater_current(NX_NUMBER):
                exists: optional
                unit: NX_CURRENT
                doc: |
                  Nominal current of the heater.
              heater_voltage(NX_NUMBER):
                exists: optional
                unit: NX_VOLTAGE
                doc: |
                  Nominal voltage of the heater.
              heater_power(NX_NUMBER):
                unit: NX_POWER
          optics(NXoptical_system_em):
            exists: recommended
    simulation(NXem_simulation):
      exists: optional
      doc: |
        Documentation for a simulation of electron beam-matter interaction.
      programID(NXprogram):
        nameType: partial
        exists: recommended
        doc: |
          The program with which the simulation was performed.
        program(NX_CHAR):
          \@version(NX_CHAR):
      environment(NXcollection):
        exists: recommended
        doc: |
          Programs and libraries representing the computational environment
        (NXprogram):
          exists: ['min', '1', 'max', 'unbounded']
          program(NX_CHAR):
            \@version(NX_CHAR):
      config(NXparameters):
        exists: optional
        doc: |
          Configuration of the simulation
      results(NXprocess):
        exists: optional
        doc: |
          Results of the simulation
        (NXimage):
          exists: ['min', '0', 'max', 'unbounded']
        (NXspectrum):
          exists: ['min', '0', 'max', 'unbounded']
        interaction_volumeID(NXinteraction_volume_em):
          nameType: partial
          exists: ['min', '0', 'max', 'unbounded']
          (NXdata):
            exists: recommended
          (NXprocess):
            exists: recommended
    
    # relevant research result post-processed for specific community methods
    # but normalized in its representation ready to be consumed for
    # research data management systems
    roiID(NXroi):
      nameType: partial
      exists: ['min', '0', 'max', 'unbounded']
      doc: |
        xref:
          spec: EMglossary
          term: Region Of Interest
          url: https://purls.helmholtz-metadaten.de/emg/EMG_00000042
      
      # as soon as one entry is here constrained further
      # an RDM can be sure to find specific pieces of information in a
      # specific way but then every user of this application definition
      # is required to provide such information in this way!
      img(NXem_img):
        exists: optional
        imageID(NXimage):
          nameType: partial
          exists: ['min', '1', 'max', 'unbounded']
          imaging_mode(NX_CHAR):
          (NXmicrostructure):
            exists: optional
      ebsd(NXem_ebsd):
        exists: optional
        gnomonic_reference_frame(NXcoordinate_system):
          exists: optional
          alias(NX_CHAR):
            exists: optional
          type(NX_CHAR):
          handedness(NX_CHAR):
          origin(NX_CHAR):
          x_direction(NX_CHAR):
          y_direction(NX_CHAR):
          z_direction(NX_CHAR):
        pattern_center(NXprocess):
          exists: recommended
          x_boundary_convention(NX_CHAR):
          x_normalization_direction(NX_CHAR):
          y_boundary_convention(NX_CHAR):
          y_normalization_direction(NX_CHAR):
        measurement(NXprocess):
          exists: optional
          depends_on(NX_CHAR):
          source(NXnote):
            type(NX_CHAR):
            file_name(NX_CHAR):
            checksum(NX_CHAR):
            algorithm(NX_CHAR):
        simulation(NXprocess):
          exists: optional
          depends_on(NX_CHAR):
          source(NXnote):
            type(NX_CHAR):
            file_name(NX_CHAR):
            checksum(NX_CHAR):
            algorithm(NX_CHAR):
        calibration(NXprocess):
          exists: recommended
        indexing(NXprocess):
          exists: optional
          number_of_scan_points(NX_UINT):
          indexing_rate(NX_NUMBER):
            exists: recommended
          source(NXnote):
            exists: optional
            type(NX_CHAR):
            file_name(NX_CHAR):
            checksum(NX_CHAR):
            algorithm(NX_CHAR):
          
          # per scan point quantities (identifier_phase, matching_phase, positions, etc.)
          # just using the implicit optional, for the database example in NOMAD we do
          # not wish to duplicate all payload data
          phaseID(NXphase):
            nameType: partial
            exists: ['min', '0', 'max', 'unbounded']
            name(NX_CHAR):
              exists: recommended
            number_of_scan_points(NX_UINT):
            unit_cell(NXunit_cell):
              a_b_c(NX_NUMBER):
              alpha_beta_gamma(NX_NUMBER):
              space_group(NX_CHAR):
            
            # foreseen place for phase-specific texture and microstructure representations and statistics
            IPF(NXmicrostructure_ipf):
              nameType: any
              exists: recommended
              color_model(NX_CHAR):
              projection_direction(NX_NUMBER):
              map(NXdata):
                \@signal(NX_CHAR):
                \@axes(NX_CHAR):
                \@AXISNAME_indices(NX_UINT):
                  nameType: partial
                title(NX_CHAR):
                  exists: recommended
                data(NX_NUMBER):
                  \@long_name(NX_CHAR):
                axis_x(NX_NUMBER):
                  \@long_name(NX_CHAR):
                axis_y(NX_NUMBER):
                  exists: optional
                  \@long_name(NX_CHAR):
                axis_z(NX_NUMBER):
                  exists: optional
                  \@long_name(NX_CHAR):
              legend(NXdata):
                \@signal(NX_CHAR):
                \@axes(NX_CHAR):
                \@AXISNAME_indices(NX_UINT):
                  nameType: partial
                title(NX_CHAR):
                  exists: recommended
                data(NX_NUMBER):
                  \@long_name(NX_CHAR):
                axis_x(NX_NUMBER):
                  \@long_name(NX_CHAR):
                axis_y(NX_NUMBER):
                  \@long_name(NX_CHAR):
            ODF(NXmicrostructure_odf):
              nameType: any
              exists: optional
            PF(NXmicrostructure_pf):
              nameType: any
              exists: optional
            (NXmicrostructure):
              exists: optional
          roi(NXdata):
            exists: recommended
            \@signal(NX_CHAR):
            \@axes(NX_CHAR):
            \@AXISNAME_indices(NX_UINT):
              nameType: partial
            title(NX_CHAR):
              exists: recommended
            descriptor(NX_CHAR):
            data(NX_NUMBER):
            axis_z(NX_NUMBER):
              exists: optional
              \@long_name(NX_CHAR):
            axis_y(NX_NUMBER):
              \@long_name(NX_CHAR):
            axis_x(NX_NUMBER):
              \@long_name(NX_CHAR):
      eds(NXem_eds):
        exists: optional
        
        # remains to be discussed based on examples
        indexing(NXprocess):
          summary(NXdata):
            exists: optional
            \@signal(NX_CHAR):
            \@axes(NX_CHAR):
            \@AXISNAME_indices(NX_UINT):
              nameType: partial
            title(NX_CHAR):
              exists: recommended
            intensity(NX_NUMBER):
            axis_energy(NX_CHAR):
              \@long_name(NX_CHAR):
          atom_types(NX_CHAR):
          (NXimage):
            exists: ['min', '0', 'max', '118']
            iupac_line_candidates(NX_CHAR):
              exists: recommended
            energy_range(NX_NUMBER):
            image_2d(NXdata):
              \@signal(NX_CHAR):
              \@axes(NX_CHAR):
              \@AXISNAME_indices(NX_UINT):
                nameType: partial
              title(NX_CHAR):
                exists: recommended
              intensity(NX_NUMBER):
                \@units(NX_CHAR):
                  exists: recommended
              axis_i(NX_NUMBER):
                \@long_name(NX_CHAR):
                \@units(NX_CHAR):
              axis_j(NX_NUMBER):
                \@long_name(NX_CHAR):
                \@units(NX_CHAR):
      eels(NXem_eels):
        exists: optional
  
  # see an example how to map e.g. the following flat schema https://www.zenodo.org/record/6513745 to NXem
  # in https://github.com/FAIRmat-NFDI/nexus_definitions/commit/0b928c4352bc5636f673b5fb25ce990f1af8a099

# ++++++++++++++++++++++++++++++++++ SHA HASH ++++++++++++++++++++++++++++++++++
# 434eb9b819d62bf4c4232ffe882c157f61c386a61070dc237fd860af4e2ff5c4
# <?xml version='1.0' encoding='UTF-8'?>
# <?xml-stylesheet type="text/xsl" href="nxdlformat.xsl"?>
# <!--
# # NeXus - Neutron and X-ray Common Data Format
# #
# # Copyright (C) 2022-2025 NeXus International Advisory Committee (NIAC)
# #
# # This library is free software; you can redistribute it and/or
# # modify it under the terms of the GNU Lesser General Public
# # License as published by the Free Software Foundation; either
# # version 3 of the License, or (at your option) any later version.
# #
# # This library is distributed in the hope that it will be useful,
# # but WITHOUT ANY WARRANTY; without even the implied warranty of
# # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# # Lesser General Public License for more details.
# #
# # You should have received a copy of the GNU Lesser General Public
# # License along with this library; if not, write to the Free Software
# # Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
# #
# # For further information, see http://www.nexusformat.org
# -->
# <definition xmlns="http://definition.nexusformat.org/nxdl/3.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" category="application" type="group" name="NXem" extends="NXobject" xsi:schemaLocation="http://definition.nexusformat.org/nxdl/3.1 ../nxdl.xsd">
#     <doc>
#         Application definition for normalized representation of electron microscopy research.
#         
#         This application definition is a comprehensive, general description for the
#         standardization of data and metadata collected using electron microscopy.
#         
#         NXem is designed to be used for documenting experiments or computer simulations in which
#         controlled electron beams are used to study electron-beam matter interactions, explore
#         physical mechanisms and phenomena, or to characterize materials with an electron microscope.
#     </doc>
#     <group type="NXentry" minOccurs="1" maxOccurs="unbounded">
#         <field name="definition" type="NX_CHAR">
#             <enumeration>
#                 <item value="NXem"/>
#             </enumeration>
#         </field>
#         <group name="profiling" type="NXcs_profiling" optional="true">
#             <doc>
#                 The configuration of the software that was used to generate this NeXus file.
#             </doc>
#             <group type="NXprogram" minOccurs="0" maxOccurs="unbounded">
#                 <doc>
#                     A collection of all programs and libraries used to generate this NeXus file.
#                     Ideally, this would enable a binary recreation from the input data.
#                     
#                     Examples include the name and version of the libraries used to write the
#                     instance. Ideally, the software which writes these NXprogram instances
#                     also includes the version of the set of NeXus classes i.e. the specific set
#                     of base classes, application definitions, and contributed definitions
#                     with which the here described concepts can be resolved.
#                     
#                     For the `pynxtools library &lt;https://github.com/FAIRmat-NFDI/pynxtools&gt;`_
#                     which is used by the `NOMAD &lt;https://nomad-lab.eu/nomad-lab&gt;`_
#                     research data management system, it makes sense to store e.g. the GitHub
#                     repository commit and respective submodule references used.
#                     
#                     Instances can also be used to document the modules and libraries that
#                     are offered by the computational environment such as those parsed
#                     from conda or python virtualenv environments.
#                 </doc>
#                 <field name="program" type="NX_CHAR">
#                     <attribute name="version" type="NX_CHAR"/>
#                 </field>
#             </group>
#         </group>
#         <field name="identifier_experiment" type="NX_CHAR" optional="true">
#             <doc>
#                 A (globally) unique persistent identifier for referring to this experiment.
#             </doc>
#         </field>
#         <field name="experiment_alias" type="NX_CHAR" optional="true">
#             <doc>
#                 Alias (short name) which scientists can use to refer to this experiment.
#             </doc>
#         </field>
#         <field name="experiment_description" type="NX_CHAR" optional="true">
#             <doc>
#                 Free-text description about the experiment.
#                 
#                 Users are strongly advised to parameterize the description of their experiment
#                 by using respective groups and fields and base classes instead of writing prose
#                 into the field.
#             </doc>
#         </field>
#         <field name="start_time" type="NX_DATE_TIME">
#             <doc>
#                 ISO 8601 time code with local time zone offset to UTC information included
#                 when the microscope session started. If the application demands that time
#                 codes in this section of the application definition should only be used
#                 for specifying when the experiment was performed - and the exact
#                 duration is not relevant - use this start_time field.
#                 
#                 Often though it is useful to specify a time interval via setting both a start_time
#                 and an end_time because this enables software tools and users to collect a
#                 more detailed bookkeeping of the experiment.
#                 
#                 Users should be aware though that even using only start_time and end_time
#                 may not be sufficient to infer how long the experiment took or for how long
#                 data were acquired. To bookkeep more fine-grained timestamps over the
#                 course of the experiment is possible with start_time and end_time fields
#                 of respective :ref:`NXevent_data_em` instances.
#             </doc>
#         </field>
#         <field name="end_time" type="NX_DATE_TIME" recommended="true">
#             <doc>
#                 ISO 8601 time code with local time zone offset to UTC included when
#                 the microscope session ended.
#                 
#                 See docstring of the start_time field to see how to use the
#                 start_time and end_time together.
#             </doc>
#         </field>
#         <group type="NXcite" minOccurs="0" maxOccurs="unbounded"/>
#         <group type="NXnote" minOccurs="0" maxOccurs="unbounded">
#             <doc>
#                 Collection of serialized resources associated with the experiment.
#                 Examples of such resources are files which are formatted using proprietary
#                 data models of technology partners as those generated by the control software
#                 of the microscope during the instrument session.
#             </doc>
#             <field name="type" type="NX_CHAR"/>
#             <field name="file_name" type="NX_CHAR"/>
#             <field name="checksum" type="NX_CHAR"/>
#             <field name="algorithm" type="NX_CHAR"/>
#         </group>
#         <group name="userID" type="NXuser" minOccurs="0" maxOccurs="unbounded" nameType="partial">
#             <doc>
#                 Information about persons who performed or were involved in the microscope
#                 session or simulation run.
#             </doc>
#             <field name="identifierNAME" type="NX_CHAR" nameType="partial" recommended="true">
#                 <attribute name="type" type="NX_CHAR"/>
#             </field>
#             <field name="name" type="NX_CHAR" optional="true">
#                 <doc>
#                     Given (first) name and surname.
#                 </doc>
#             </field>
#             <field name="affiliation" type="NX_CHAR" optional="true">
#                 <doc>
#                     Name of the affiliation at the point in time when the experiment was performed.
#                 </doc>
#             </field>
#             <field name="address" type="NX_CHAR" optional="true">
#                 <doc>
#                     Postal address of the affiliation.
#                 </doc>
#             </field>
#             <field name="email" type="NX_CHAR" optional="true">
#                 <doc>
#                     Email address at the point in time when the experiment was performed.
#                     
#                     Writing the most permanently used email is recommended.
#                 </doc>
#             </field>
#             <field name="telephone_number" type="NX_CHAR" optional="true">
#                 <doc>
#                     Telephone number at the point in time when the experiment was performed.
#                 </doc>
#             </field>
#             <field name="role" type="NX_CHAR" optional="true">
#                 <doc>
#                     User role at the point in time when the experiment was performed.
#                     
#                     Examples are technician operating the microscope, student, postdoc,
#                     principle investigator, or guest.
#                 </doc>
#             </field>
#         </group>
#         <group name="sampleID" type="NXsample" minOccurs="1" maxOccurs="unbounded" nameType="partial">
#             <doc>
#                 A physical entity which contains material intended to be investigated.
#                 Sample and specimen are treated as de facto synonyms.
#                 Samples can be real or virtual ones as annotated via is_simulation.
#                 
#                 The suggested best practice is to call this group sample. In those cases when
#                 multiple samples need to be grouped inside one entry, these SAMPLE groups
#                 should be named using the prefix sample followed an index starting from 1, i.e.
#                 (sample1, sample2).
#                 
#                 There are at least two strategies how to store (meta)data when one analyzes multiple
#                 samples - not different ROIs on a single sample though - in one session.
#                 
#                 One strategy is to store each sample and its results under an own NXem/ENTRY.
#                 This is one of the most frequent use cases as during most sessions typically only a
#                 single sample is investigated. In this case the name of this group should be NXem/ENTRY/sample.
#                 
#                 If multiple samples are investigated storing each of them in their own ENTRY group eventually will
#                 demand unnecessary duplication of instrument details.
#                 
#                 This can be avoided by using another strategy for storing samples and their results.
#                 Namely, by using only one instance of NXem/ENTRY. That NXem/ENTRY should then be named,
#                 like in the previous case, NXem/entry1 and the samples should be named sample1, sample2, etc.,
#                 i.e. instances should use sample as a name prefix.
#                 
#                 In this case the collection of events should use identifier_sample to state clearly for which
#                 of the samples loaded the (characterization) event was detected.
#                 
#                 This concept is related to term `Specimen`_ of the EMglossary standard.
#                 
#                 .. _Specimen: https://purls.helmholtz-metadaten.de/emg/EMG_00000046
#             </doc>
#             <field name="is_simulation" type="NX_BOOLEAN">
#                 <doc>
#                     Qualifier whether the sample is a real (in which case is_simulation should be set to false)
#                     or a virtual one (in which case is_simulation should be set to true).
#                 </doc>
#             </field>
#             <field name="physical_form" recommended="true">
#                 <enumeration open="true">
#                     <item value="bulk"/>
#                     <item value="foil"/>
#                     <item value="thin_film"/>
#                     <item value="powder"/>
#                 </enumeration>
#             </field>
#             <field name="identifier_sample" type="NX_CHAR" recommended="true">
#                 <doc>
#                     Ideally, (globally) unique persistent identifier which distinguishes this sample from all others
#                     and especially the predecessor/origin from where that sample was cut off. An example of cutting off
#                     is a steel sheet that is the parent sample from which a small portion was wire-eroded that
#                     represents the sample that was then prepared for characterization with an electron microscope.
#                     
#                     The terms sample and specimen are here considered as exact synonyms.
#                     
#                     This field must not be used for an alias for the sample name. Instead, use name.
#                     
#                     In cases where multiple specimens were loaded into the microscope, the identifier has to resolve
#                     the specific sample, whose results are stored by this :ref:`NXentry` instance, because a single
#                     NXentry should be used for the characterization of a single specimen.
#                     
#                     Details about the specimen preparation should be stored in resources referring to identifier_parent.
#                 </doc>
#                 <attribute name="type" type="NX_CHAR"/>
#             </field>
#             <field name="identifier_parent" type="NX_CHAR" recommended="true">
#                 <doc>
#                     Identifier of the sample from which the sample was cut off or the string *None*.
#                     I.e. the parent to this sample.
#                     
#                     The purpose of this field is to support functionalities for tracking
#                     sample provenance in a research data management system.
#                 </doc>
#                 <attribute name="type" type="NX_CHAR"/>
#             </field>
#             <field name="preparation_date" type="NX_DATE_TIME">
#                 <doc>
#                     ISO 8601 time code with local time zone offset to UTC information
#                     when the specimen was prepared.
#                     
#                     Ideally, report the end of the preparation, i.e. the last known timestamp when
#                     the measured specimen surface was actively prepared. Ideally, this matches
#                     the last timestamp that is mentioned in the digital resource pointed to by
#                     identifier_parent.
#                     
#                     Knowing when the specimen was exposed to e.g. specific atmosphere is especially
#                     required for material that is sensitive to the environment such as specimens that were
#                     charged with fast diffusing elements or short-lived radioactive tracers.
#                     
#                     Additional time stamps prior to preparation_date are better placed in resources which
#                     describe but do not pollute the description here with prose. Resolving these
#                     connected metadata is considered the responsibility of the research data management
#                     system and not the a NeXus file.
#                 </doc>
#             </field>
#             <field name="name" type="NX_CHAR" recommended="true">
#                 <doc>
#                     Specimen name
#                 </doc>
#             </field>
#             <field name="atom_types" type="NX_CHAR">
#                 <doc>
#                     List of comma-separated elements from the periodic table that are contained in the sample.
#                     If the sample substance has multiple components, all elements from each component
#                     must be included in atom_types.
#                     
#                     The purpose of the field is to offer research data management systems an opportunity
#                     to parse the relevant elements without having to interpret these from the resources
#                     pointed to by identifier_parent or walk through eventually deeply nested groups in
#                     individual data instances.
#                 </doc>
#             </field>
#             <field name="thickness" type="NX_NUMBER" optional="true" units="NX_LENGTH">
#                 <doc>
#                     (Measured) sample thickness.
#                     
#                     The information is recorded to qualify if the beam used was likely
#                     able to shine through the specimen. For scanning electron microscopy,
#                     in many cases the specimen is typically thicker than what is
#                     illuminatable by the electron beam.
#                     
#                     In this case the value should be set to the actual thickness of the specimen
#                     viewed for an illumination situation where the nominal surface normal of the
#                     specimen is parallel to the optical axis.
#                 </doc>
#             </field>
#             <field name="density" type="NX_NUMBER" optional="true" units="NX_ANY">
#                 <doc>
#                     (Measured) density of the specimen.
#                     
#                     For multi-layered specimens this field should only be used to describe
#                     the density of the excited volume. For scanning electron microscopy
#                     the usage of this field is discouraged and instead an instance of a
#                     region-of-interest connected to individual :ref:`NXevent_data_em`
#                     instances can provide a cleaner description of the relevant details.
#                 </doc>
#             </field>
#             <field name="description" type="NX_CHAR" optional="true">
#                 <doc>
#                     Discouraged free-text field to provide further detail.
#                 </doc>
#             </field>
#         </group>
#         <group name="consistent_rotations" type="NXparameters" recommended="true">
#             <doc>
#                 The conventions used when reporting crystal orientations.
#                 We follow the best practices of the Material Science community
#                 that are defined in reference `&lt;https://doi.org/10.1088/0965-0393/23/8/083501&gt;`_.
#             </doc>
#             <field name="rotation_handedness" type="NX_CHAR">
#                 <doc>
#                     Convention how a positive rotation angle is defined when viewing
#                     from the end of the rotation unit vector towards its origin.
#                     This is in accordance with convention 2 of reference `&lt;https://doi.org/10.1088/0965-0393/23/8/083501&gt;`_.
#                     
#                     Counter_clockwise is equivalent to a right-handed choice.
#                     Clockwise is equivalent to a left-handed choice.
#                 </doc>
#                 <enumeration>
#                     <item value="counter_clockwise"/>
#                     <item value="clockwise"/>
#                 </enumeration>
#             </field>
#             <field name="rotation_convention" type="NX_CHAR">
#                 <doc>
#                     How are rotations interpreted into an orientation according to convention 3
#                     of reference `&lt;https://doi.org/10.1088/0965-0393/23/8/083501&gt;`_.
#                 </doc>
#                 <enumeration>
#                     <item value="passive"/>
#                     <item value="active"/>
#                 </enumeration>
#             </field>
#             <field name="euler_angle_convention" type="NX_CHAR">
#                 <doc>
#                     How are Euler angles interpreted given that there are several choices (e.g. zxz, xyz)
#                     according to convention 4 of reference `&lt;https://doi.org/10.1088/0965-0393/23/8/083501&gt;`_.
#                     
#                     The most frequently used convention is zxz, which is based on the work of H.-J. Bunge
#                     but other conventions are possible. Apart from undefined, proper Euler angles
#                     are distinguished from (improper) Tait-Bryan angles.
#                 </doc>
#                 <enumeration>
#                     <item value="zxz"/>
#                     <item value="xyx"/>
#                     <item value="yzy"/>
#                     <item value="zyz"/>
#                     <item value="xzx"/>
#                     <item value="yxy"/>
#                     <item value="xyz"/>
#                     <item value="yzx"/>
#                     <item value="zxy"/>
#                     <item value="xzy"/>
#                     <item value="zyx"/>
#                     <item value="yxz"/>
#                 </enumeration>
#             </field>
#             <field name="axis_angle_convention" type="NX_CHAR">
#                 <doc>
#                     To which angular range is the rotation angle argument of an
#                     axis-angle pair parameterization constrained according to
#                     convention 5 of reference `&lt;https://doi.org/10.1088/0965-0393/23/8/083501&gt;`_.
#                 </doc>
#                 <enumeration>
#                     <item value="rotation_angle_on_interval_zero_to_pi"/>
#                 </enumeration>
#             </field>
#             <field name="sign_convention" type="NX_CHAR">
#                 <doc>
#                     Which sign convention is followed when converting orientations
#                     between different parametrizations/representations according
#                     to convention 6 of reference `&lt;https://doi.org/10.1088/0965-0393/23/8/083501&gt;`_.
#                 </doc>
#                 <enumeration>
#                     <item value="p_plus_one"/>
#                     <item value="p_minus_one"/>
#                 </enumeration>
#             </field>
#         </group>
#         <group type="NXcoordinate_system" minOccurs="1" maxOccurs="unbounded">
#             <field name="alias" type="NX_CHAR" optional="true"/>
#             <field name="type" type="NX_CHAR"/>
#             <field name="handedness" type="NX_CHAR"/>
#             <field name="origin" type="NX_CHAR"/>
#         </group>
#         <group name="processing_reference_frame" type="NXcoordinate_system" recommended="true">
#             <field name="alias" type="NX_CHAR" optional="true"/>
#             <field name="type" type="NX_CHAR"/>
#             <field name="handedness" type="NX_CHAR"/>
#             <field name="origin" type="NX_CHAR" recommended="true">
#                 <doc>
#                     Location of the origin of the processing_reference_frame.
#                     
#                     It is assumed that regions-of-interest in this reference frame form a rectangle or cuboid.
#                     Edges are interpreted by inspecting the direction of their outer unit normals
#                     (which point either parallel or antiparallel) along respective base vector direction
#                     of the reference frame.
#                     
#                     If any of these assumptions is not met, the user is required to explicitly state this.
#                 </doc>
#                 <enumeration open="true">
#                     <item value="front_top_left"/>
#                     <item value="front_top_right"/>
#                     <item value="front_bottom_right"/>
#                     <item value="front_bottom_left"/>
#                     <item value="back_top_left"/>
#                     <item value="back_top_right"/>
#                     <item value="back_bottom_right"/>
#                     <item value="back_bottom_left"/>
#                 </enumeration>
#             </field>
#             <field name="x_direction" type="NX_CHAR" recommended="true">
#                 <doc>
#                     Direction of the positively pointing x-axis base vector of the
#                     processing_reference_frame.
#                 </doc>
#                 <enumeration open="true">
#                     <item value="north"/>
#                     <item value="east"/>
#                     <item value="south"/>
#                     <item value="west"/>
#                     <item value="in"/>
#                     <item value="out"/>
#                 </enumeration>
#             </field>
#             <field name="y_direction" type="NX_CHAR" recommended="true">
#                 <doc>
#                     Direction of the positively pointing y-axis base vector of the
#                     processing_reference_frame.
#                 </doc>
#                 <enumeration open="true">
#                     <item value="north"/>
#                     <item value="east"/>
#                     <item value="south"/>
#                     <item value="west"/>
#                     <item value="in"/>
#                     <item value="out"/>
#                 </enumeration>
#             </field>
#             <field name="z_direction" type="NX_CHAR" recommended="true">
#                 <doc>
#                     Direction of the positively pointing z-axis base vector of the
#                     processing_reference_frame.
#                 </doc>
#                 <enumeration open="true">
#                     <item value="north"/>
#                     <item value="east"/>
#                     <item value="south"/>
#                     <item value="west"/>
#                     <item value="in"/>
#                     <item value="out"/>
#                 </enumeration>
#             </field>
#         </group>
#         <group name="sample_reference_frame" type="NXcoordinate_system" recommended="true">
#             <field name="depends_on" type="NX_CHAR" optional="true">
#                 <doc>
#                     Reference to the specifically named :ref:`NXsample` instance(s) for
#                     which these conventions apply (e.g. /entry1/sample1).
#                 </doc>
#             </field>
#             <field name="alias" type="NX_CHAR" optional="true"/>
#             <field name="type" type="NX_CHAR"/>
#             <field name="handedness" type="NX_CHAR"/>
#             <field name="origin" type="NX_CHAR" recommended="true">
#                 <doc>
#                     Location of the origin of the sample_reference_frame.
#                     
#                     It is assumed that regions-of-interest in this reference frame form a rectangle or cuboid.
#                     Edges are interpreted by inspecting the direction of their outer unit normals
#                     (which point either parallel or antiparallel) along respective base vector direction
#                     of the reference frame.
#                     
#                     If any of these assumptions is not met, the user is required to explicitly state this.
#                 </doc>
#                 <enumeration open="true">
#                     <item value="front_top_left"/>
#                     <item value="front_top_right"/>
#                     <item value="front_bottom_right"/>
#                     <item value="front_bottom_left"/>
#                     <item value="back_top_left"/>
#                     <item value="back_top_right"/>
#                     <item value="back_bottom_right"/>
#                     <item value="back_bottom_left"/>
#                 </enumeration>
#             </field>
#             <field name="x_direction" type="NX_CHAR" recommended="true">
#                 <doc>
#                     Direction of the positively pointing x-axis base vector of the
#                     sample_reference_frame.
#                 </doc>
#                 <enumeration open="true">
#                     <item value="north"/>
#                     <item value="east"/>
#                     <item value="south"/>
#                     <item value="west"/>
#                     <item value="in"/>
#                     <item value="out"/>
#                 </enumeration>
#             </field>
#             <field name="y_direction" type="NX_CHAR" recommended="true">
#                 <doc>
#                     Direction of the positively pointing y-axis base vector of the
#                     sample_reference_frame.
#                 </doc>
#                 <enumeration open="true">
#                     <item value="north"/>
#                     <item value="east"/>
#                     <item value="south"/>
#                     <item value="west"/>
#                     <item value="in"/>
#                     <item value="out"/>
#                 </enumeration>
#             </field>
#             <field name="z_direction" type="NX_CHAR" recommended="true">
#                 <doc>
#                     Direction of the positively pointing z-axis base vector of the
#                     sample_reference_frame.
#                 </doc>
#                 <enumeration open="true">
#                     <item value="north"/>
#                     <item value="east"/>
#                     <item value="south"/>
#                     <item value="west"/>
#                     <item value="in"/>
#                     <item value="out"/>
#                 </enumeration>
#             </field>
#         </group>
#         <group name="detector_reference_frameID" type="NXcoordinate_system" nameType="partial" minOccurs="0" maxOccurs="unbounded">
#             <doc>
#                 The reference frame that is defined by a specific detector.
#             </doc>
#             <field name="depends_on" type="NX_CHAR" optional="true">
#                 <doc>
#                     Reference to the specifically named :ref:`NXdetector` instance for
#                     which these conventions apply (e.g. /entry1/instrument/detector1).
#                 </doc>
#             </field>
#             <field name="alias" type="NX_CHAR" optional="true"/>
#             <field name="type" type="NX_CHAR"/>
#             <field name="handedness" type="NX_CHAR"/>
#             <field name="origin" type="NX_CHAR" recommended="true">
#                 <doc>
#                     Location of the origin of the detector_reference_frame.
#                     
#                     If the regions-of-interest forms a rectangle or cuboid, it is assumed that edges are interpreted
#                     by inspecting the direction of their outer unit normals (which point either parallel or antiparallel)
#                     along respective base vector direction of the reference frame.
#                     
#                     If any of these assumptions is not met, the user is required to explicitly state this.
#                 </doc>
#                 <enumeration open="true">
#                     <item value="front_top_left"/>
#                     <item value="front_top_right"/>
#                     <item value="front_bottom_right"/>
#                     <item value="front_bottom_left"/>
#                     <item value="back_top_left"/>
#                     <item value="back_top_right"/>
#                     <item value="back_bottom_right"/>
#                     <item value="back_bottom_left"/>
#                 </enumeration>
#             </field>
#             <field name="x_direction" type="NX_CHAR" recommended="true">
#                 <doc>
#                     Direction of the positively pointing x-axis base vector of the
#                     detector_reference_frame.
#                 </doc>
#                 <enumeration open="true">
#                     <item value="north"/>
#                     <item value="east"/>
#                     <item value="south"/>
#                     <item value="west"/>
#                     <item value="in"/>
#                     <item value="out"/>
#                 </enumeration>
#             </field>
#             <field name="y_direction" type="NX_CHAR" recommended="true">
#                 <doc>
#                     Direction of the positively pointing y-axis base vector of the
#                     detector_reference_frame.
#                 </doc>
#                 <enumeration open="true">
#                     <item value="north"/>
#                     <item value="east"/>
#                     <item value="south"/>
#                     <item value="west"/>
#                     <item value="in"/>
#                     <item value="out"/>
#                 </enumeration>
#             </field>
#             <field name="z_direction" type="NX_CHAR" recommended="true">
#                 <doc>
#                     Direction of the positively pointing z-axis base vector of the
#                     detector_reference_frame.
#                 </doc>
#                 <enumeration open="true">
#                     <item value="north"/>
#                     <item value="east"/>
#                     <item value="south"/>
#                     <item value="west"/>
#                     <item value="in"/>
#                     <item value="out"/>
#                 </enumeration>
#             </field>
#         </group>
#         <group name="measurement" type="NXem_measurement" optional="true">
#             <group name="instrument" type="NXinstrument_em">
#                 <field name="name" type="NX_CHAR" recommended="true"/>
#                 <field name="location" type="NX_CHAR" recommended="true"/>
#                 <field name="type" type="NX_CHAR" recommended="true"/>
#                 <group name="fabrication" type="NXfabrication">
#                     <field name="vendor" type="NX_CHAR"/>
#                     <field name="model" type="NX_CHAR"/>
#                     <field name="serial_number" type="NX_CHAR" recommended="true"/>
#                 </group>
#                 <group name="programID" type="NXprogram" recommended="true" nameType="partial">
#                     <doc>
#                         Details about the control program used for operating the microscope.
#                     </doc>
#                     <field name="program" type="NX_CHAR">
#                         <attribute name="version" type="NX_CHAR"/>
#                     </field>
#                 </group>
#                 <group name="ebeam_column" type="NXebeam_column">
#                     <group name="fabrication" type="NXfabrication" optional="true">
#                         <field name="vendor" type="NX_CHAR"/>
#                         <field name="model" type="NX_CHAR"/>
#                         <field name="serial_number" type="NX_CHAR" recommended="true"/>
#                     </group>
#                     <group name="electron_source" type="NXsource" recommended="true">
#                         <field name="emitter_type" type="NX_CHAR"/>
#                         <field name="probe" type="NX_CHAR" optional="true"/>
#                         <!--voltage like all other dynamic quantities should better be placed in instances of NXevent_data_em-->
#                         <group name="fabrication" type="NXfabrication" optional="true">
#                             <field name="vendor" type="NX_CHAR"/>
#                             <field name="model" type="NX_CHAR"/>
#                             <field name="serial_number" type="NX_CHAR" recommended="true"/>
#                         </group>
#                     </group>
#                     <group name="lensID" type="NXlens_em" minOccurs="0" maxOccurs="unbounded" nameType="partial">
#                         <field name="name" type="NX_CHAR"/>
#                         <group name="fabrication" type="NXfabrication" optional="true">
#                             <field name="vendor" type="NX_CHAR"/>
#                             <field name="model" type="NX_CHAR"/>
#                             <field name="serial_number" type="NX_CHAR" recommended="true"/>
#                         </group>
#                     </group>
#                     <group name="apertureID" type="NXaperture" minOccurs="0" maxOccurs="unbounded" nameType="partial">
#                         <field name="name" type="NX_CHAR"/>
#                         <group name="fabrication" type="NXfabrication" optional="true">
#                             <field name="vendor" type="NX_CHAR"/>
#                             <field name="model" type="NX_CHAR"/>
#                             <field name="serial_number" type="NX_CHAR" recommended="true"/>
#                         </group>
#                     </group>
#                     <group name="monochromatorID" type="NXmonochromator" minOccurs="0" maxOccurs="unbounded" nameType="partial">
#                         <field name="type" type="NX_CHAR"/>
#                         <group name="fabrication" type="NXfabrication" optional="true">
#                             <field name="vendor" type="NX_CHAR"/>
#                             <field name="model" type="NX_CHAR"/>
#                             <field name="serial_number" type="NX_CHAR" recommended="true"/>
#                         </group>
#                     </group>
#                     <group name="corrector_cs" type="NXcorrector_cs" minOccurs="0" maxOccurs="1">
#                         <group name="fabrication" type="NXfabrication" recommended="true">
#                             <field name="vendor" type="NX_CHAR"/>
#                             <field name="model" type="NX_CHAR"/>
#                             <field name="serial_number" type="NX_CHAR" recommended="true"/>
#                         </group>
#                     </group>
#                     <group name="corrector_ax" type="NXcomponent" minOccurs="0" maxOccurs="1">
#                         <group name="fabrication" type="NXfabrication" optional="true">
#                             <field name="vendor" type="NX_CHAR"/>
#                             <field name="model" type="NX_CHAR"/>
#                             <field name="serial_number" type="NX_CHAR" recommended="true"/>
#                         </group>
#                     </group>
#                     <group name="biprismID" type="NXcomponent" nameType="partial" minOccurs="0" maxOccurs="1">
#                         <group name="fabrication" type="NXfabrication" recommended="true">
#                             <field name="vendor" type="NX_CHAR"/>
#                             <field name="model" type="NX_CHAR"/>
#                             <field name="serial_number" type="NX_CHAR" recommended="true"/>
#                         </group>
#                     </group>
#                     <group name="phaseplateID" type="NXcomponent" nameType="partial" minOccurs="0" maxOccurs="unbounded">
#                         <field name="type" type="NX_CHAR"/>
#                         <group name="fabrication" type="NXfabrication" recommended="true">
#                             <field name="vendor" type="NX_CHAR"/>
#                             <field name="model" type="NX_CHAR"/>
#                             <field name="serial_number" type="NX_CHAR" recommended="true"/>
#                         </group>
#                     </group>
#                     <group name="sensorID" type="NXsensor" nameType="partial" minOccurs="0" maxOccurs="unbounded"/>
#                     <group name="actuatorID" type="NXactuator" nameType="partial" minOccurs="0" maxOccurs="unbounded"/>
#                     <group name="beamID" type="NXbeam" nameType="partial" minOccurs="0" maxOccurs="unbounded"/>
#                     <group name="deflectorID" type="NXdeflector" minOccurs="0" maxOccurs="unbounded"/>
#                 </group>
#                 <group name="ibeam_column" type="NXibeam_column" minOccurs="0" maxOccurs="1">
#                     <!--there are tri-beam SEMs, but with a laser for which one should add NXsource
# fabrication groups often were not made recommended or required because in practice
# often scientific groups buy a commercial microscope for which the type and serial number
# of the microscope (as in the top-level fabrication of instrument) suffices to recover
# which components that microscope was built from-->
#                     <group name="fabrication" type="NXfabrication" optional="true">
#                         <field name="vendor" type="NX_CHAR"/>
#                         <field name="model" type="NX_CHAR"/>
#                         <field name="serial_number" type="NX_CHAR" recommended="true"/>
#                     </group>
#                     <group name="ion_source" type="NXsource">
#                         <field name="emitter_type" type="NX_CHAR"/>
#                         <group name="probe" type="NXatom"/>
#                         <group name="fabrication" type="NXfabrication" optional="true">
#                             <field name="vendor" type="NX_CHAR"/>
#                             <field name="model" type="NX_CHAR"/>
#                             <field name="serial_number" type="NX_CHAR" recommended="true"/>
#                         </group>
#                     </group>
#                     <group name="lensID" type="NXlens_em" nameType="partial" minOccurs="0" maxOccurs="unbounded">
#                         <field name="name" type="NX_CHAR"/>
#                         <group name="fabrication" type="NXfabrication" optional="true">
#                             <field name="vendor" type="NX_CHAR"/>
#                             <field name="model" type="NX_CHAR"/>
#                             <field name="serial_number" type="NX_CHAR" recommended="true"/>
#                         </group>
#                     </group>
#                     <group name="apertureID" type="NXaperture" nameType="partial" minOccurs="0" maxOccurs="unbounded">
#                         <field name="name" type="NX_CHAR"/>
#                         <group name="fabrication" type="NXfabrication" optional="true">
#                             <field name="vendor" type="NX_CHAR"/>
#                             <field name="model" type="NX_CHAR"/>
#                             <field name="serial_number" type="NX_CHAR" recommended="true"/>
#                         </group>
#                     </group>
#                     <group name="monochromatorID" type="NXmonochromator" nameType="partial" minOccurs="0" maxOccurs="unbounded">
#                         <group name="fabrication" type="NXfabrication" optional="true">
#                             <field name="vendor" type="NX_CHAR"/>
#                             <field name="model" type="NX_CHAR"/>
#                             <field name="serial_number" type="NX_CHAR" recommended="true"/>
#                         </group>
#                     </group>
#                     <!--device for correcting axial astigmatism of ion beam?-->
#                     <group name="sensorID" type="NXsensor" nameType="partial" minOccurs="0" maxOccurs="unbounded"/>
#                     <group name="actuatorID" type="NXactuator" nameType="partial" minOccurs="0" maxOccurs="unbounded"/>
#                     <group name="beamID" type="NXbeam" nameType="partial" minOccurs="0" maxOccurs="unbounded"/>
#                     <group name="deflectorID" type="NXdeflector" nameType="partial" minOccurs="0" maxOccurs="unbounded"/>
#                 </group>
#                 <group name="detectorID" type="NXdetector" nameType="partial" minOccurs="0" maxOccurs="unbounded">
#                     <field name="name" type="NX_CHAR"/>
#                     <group name="fabrication" type="NXfabrication" recommended="true">
#                         <field name="vendor" type="NX_CHAR"/>
#                         <field name="model" type="NX_CHAR"/>
#                         <field name="serial_number" type="NX_CHAR" recommended="true"/>
#                     </group>
#                 </group>
#                 <group name="scan_controller" type="NXscanbox_em" optional="true">
#                     <group name="fabrication" type="NXfabrication" recommended="true">
#                         <field name="vendor" type="NX_CHAR"/>
#                         <field name="model" type="NX_CHAR"/>
#                         <field name="serial_number" type="NX_CHAR" recommended="true"/>
#                     </group>
#                 </group>
#                 <group name="stage" type="NXmanipulator" minOccurs="0" maxOccurs="unbounded">
#                     <field name="design" type="NX_CHAR" recommended="true"/>
#                     <!--add enumeration values from old NXstage_lab-->
#                     <group name="fabrication" type="NXfabrication" recommended="true">
#                         <field name="vendor" type="NX_CHAR"/>
#                         <field name="model" type="NX_CHAR"/>
#                         <field name="serial_number" type="NX_CHAR" recommended="true"/>
#                     </group>
#                 </group>
#                 <group name="nanoprobe" type="NXmanipulator" optional="true">
#                     <group name="fabrication" type="NXfabrication" recommended="true">
#                         <field name="vendor" type="NX_CHAR"/>
#                         <field name="model" type="NX_CHAR"/>
#                         <field name="serial_number" type="NX_CHAR" recommended="true"/>
#                     </group>
#                 </group>
#                 <group name="pumpID" type="NXpump" nameType="partial" minOccurs="0" maxOccurs="unbounded">
#                     <field name="design" type="NX_CHAR"/>
#                 </group>
#                 <group name="sensorID" type="NXsensor" nameType="partial" minOccurs="0" maxOccurs="unbounded"/>
#                 <group name="actuatorID" type="NXactuator" nameType="partial" minOccurs="0" maxOccurs="unbounded"/>
#             </group>
#             <group name="eventID" type="NXevent_data_em" nameType="partial" minOccurs="0" maxOccurs="unbounded">
#                 <field name="start_time" type="NX_DATE_TIME" recommended="true"/>
#                 <field name="end_time" type="NX_DATE_TIME" recommended="true"/>
#                 <field name="identifier_sample" type="NX_CHAR" recommended="true"/>
#                 <!--above field is another example for lacking support to define conditional existence constraints-->
#                 <group name="imageID" type="NXimage" minOccurs="0" maxOccurs="unbounded" nameType="partial">
#                     <group type="NXprocess" recommended="true">
#                         <group name="input" type="NXnote" recommended="true">
#                             <field name="type" type="NX_CHAR"/>
#                             <field name="file_name" type="NX_CHAR"/>
#                             <field name="checksum" type="NX_CHAR"/>
#                             <field name="algorithm" type="NX_CHAR"/>
#                             <field name="context" type="NX_CHAR"/>
#                         </group>
#                         <field name="detector_identifier" type="NX_CHAR"/>
#                     </group>
#                     <group name="image_1d" type="NXdata" optional="true">
#                         <attribute name="signal" type="NX_CHAR"/>
#                         <attribute name="axes" type="NX_CHAR"/>
#                         <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
#                         <field name="title" type="NX_CHAR" recommended="true"/>
#                         <field name="real" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="imag" type="NX_NUMBER" optional="true">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="magnitude" type="NX_NUMBER" optional="true">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="intensity" type="NX_COMPLEX" optional="true">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_i" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                     </group>
#                     <group name="image_2d" type="NXdata" optional="true">
#                         <attribute name="signal" type="NX_CHAR"/>
#                         <attribute name="axes" type="NX_CHAR"/>
#                         <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
#                         <field name="title" type="NX_CHAR" recommended="true"/>
#                         <field name="real" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="imag" type="NX_NUMBER" optional="true">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="magnitude" type="NX_NUMBER" optional="true">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="intensity" type="NX_COMPLEX" optional="true">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_j" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_i" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                     </group>
#                     <group name="image_3d" type="NXdata" optional="true">
#                         <attribute name="signal" type="NX_CHAR"/>
#                         <attribute name="axes" type="NX_CHAR"/>
#                         <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
#                         <field name="title" type="NX_CHAR" recommended="true"/>
#                         <field name="real" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="imag" type="NX_NUMBER" optional="true">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="magnitude" type="NX_NUMBER" optional="true">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="intensity" type="NX_COMPLEX" optional="true">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_k" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_j" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_i" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                     </group>
#                     <group name="stack_1d" type="NXdata" optional="true">
#                         <attribute name="signal" type="NX_CHAR"/>
#                         <attribute name="axes" type="NX_CHAR"/>
#                         <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
#                         <field name="title" type="NX_CHAR" recommended="true"/>
#                         <field name="real" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="imag" type="NX_NUMBER" optional="true">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="magnitude" type="NX_NUMBER" optional="true">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="intensity" type="NX_NUMBER" optional="true">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="indices_group" type="NX_INT" optional="true">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="indices_image" type="NX_INT">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_i" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                     </group>
#                     <group name="stack_2d" type="NXdata" optional="true">
#                         <attribute name="signal" type="NX_CHAR"/>
#                         <attribute name="axes" type="NX_CHAR"/>
#                         <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
#                         <field name="title" type="NX_CHAR" recommended="true"/>
#                         <field name="real" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="imag" type="NX_NUMBER" optional="true">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="magnitude" type="NX_NUMBER" optional="true">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="intensity" type="NX_NUMBER" optional="true">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="indices_group" type="NX_INT" optional="true">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="indices_image" type="NX_INT">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_j" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_i" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                     </group>
#                     <group name="stack_3d" type="NXdata" optional="true">
#                         <attribute name="signal" type="NX_CHAR"/>
#                         <attribute name="axes" type="NX_CHAR"/>
#                         <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
#                         <field name="title" type="NX_CHAR" recommended="true"/>
#                         <field name="real" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="imag" type="NX_NUMBER" optional="true">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="magnitude" type="NX_NUMBER" optional="true">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="intensity" type="NX_NUMBER" optional="true">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="indices_group" type="NX_INT" optional="true">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="indices_image" type="NX_INT">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_k" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_j" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_i" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                     </group>
#                 </group>
#                 <group name="spectrumID" type="NXspectrum" minOccurs="0" maxOccurs="unbounded" nameType="partial">
#                     <group type="NXprocess" recommended="true">
#                         <group name="input" type="NXnote" recommended="true">
#                             <field name="type" type="NX_CHAR"/>
#                             <field name="file_name" type="NX_CHAR"/>
#                             <field name="checksum" type="NX_CHAR"/>
#                             <field name="algorithm" type="NX_CHAR"/>
#                             <field name="context" type="NX_CHAR"/>
#                         </group>
#                         <field name="detector_identifier" type="NX_CHAR"/>
#                     </group>
#                     <group name="spectrum_0d" type="NXdata" optional="true">
#                         <attribute name="signal" type="NX_CHAR"/>
#                         <attribute name="axes" type="NX_CHAR"/>
#                         <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
#                         <field name="title" type="NX_CHAR" recommended="true"/>
#                         <field name="intensity" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_energy" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                     </group>
#                     <group name="spectrum_1d" type="NXdata" optional="true">
#                         <attribute name="signal" type="NX_CHAR"/>
#                         <attribute name="axes" type="NX_CHAR"/>
#                         <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
#                         <field name="title" type="NX_CHAR" recommended="true"/>
#                         <field name="intensity" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_i" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_energy" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                     </group>
#                     <group name="spectrum_2d" type="NXdata" optional="true">
#                         <attribute name="signal" type="NX_CHAR"/>
#                         <attribute name="axes" type="NX_CHAR"/>
#                         <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
#                         <field name="title" type="NX_CHAR" recommended="true"/>
#                         <field name="intensity" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_j" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_i" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_energy" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                     </group>
#                     <group name="spectrum_3d" type="NXdata" optional="true">
#                         <attribute name="signal" type="NX_CHAR"/>
#                         <attribute name="axes" type="NX_CHAR"/>
#                         <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
#                         <field name="title" type="NX_CHAR" recommended="true"/>
#                         <field name="intensity" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_k" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_j" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_i" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_energy" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                     </group>
#                     <group name="stack_0d" type="NXdata" optional="true">
#                         <attribute name="signal" type="NX_CHAR"/>
#                         <attribute name="axes" type="NX_CHAR"/>
#                         <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
#                         <field name="title" type="NX_CHAR" recommended="true"/>
#                         <field name="intensity" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="indices_spectrum" type="NX_INT">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_energy" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                     </group>
#                     <group name="stack_1d" type="NXdata" optional="true">
#                         <attribute name="signal" type="NX_CHAR"/>
#                         <attribute name="axes" type="NX_CHAR"/>
#                         <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
#                         <field name="title" type="NX_CHAR" recommended="true"/>
#                         <field name="intensity" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="indices_spectrum" type="NX_INT">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_i" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_energy" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                     </group>
#                     <group name="stack_2d" type="NXdata" optional="true">
#                         <attribute name="signal" type="NX_CHAR"/>
#                         <attribute name="axes" type="NX_CHAR"/>
#                         <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
#                         <field name="title" type="NX_CHAR" recommended="true"/>
#                         <field name="intensity" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="indices_spectrum" type="NX_INT">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_j" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_i" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_energy" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                     </group>
#                     <group name="stack_3d" type="NXdata" optional="true">
#                         <attribute name="signal" type="NX_CHAR"/>
#                         <attribute name="axes" type="NX_CHAR"/>
#                         <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
#                         <field name="title" type="NX_CHAR" recommended="true"/>
#                         <field name="intensity" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="indices_spectrum" type="NX_INT">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_k" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_j" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_i" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_energy" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                     </group>
#                 </group>
#                 <group name="instrument" type="NXinstrument_em" recommended="true">
#                     <group name="ebeam_column" type="NXebeam_column">
#                         <field name="operation_mode" type="NX_CHAR"/>
#                         <group name="electron_source" type="NXsource" optional="true">
#                             <field name="voltage" type="NX_NUMBER"/>
#                             <field name="extraction_voltage" type="NX_NUMBER" optional="true"/>
#                             <field name="emission_current" type="NX_NUMBER" optional="true"/>
#                             <field name="filament_current" type="NX_NUMBER" optional="true"/>
#                         </group>
#                         <group name="lensID" type="NXlens_em" nameType="partial" minOccurs="0" maxOccurs="unbounded">
#                             <field name="power_setting" type="NX_CHAR_OR_NUMBER"/>
#                         </group>
#                         <group name="apertureID" type="NXaperture" nameType="partial" minOccurs="0" maxOccurs="unbounded">
#                             <field name="setting" type="NX_CHAR_OR_NUMBER" recommended="true">
#                                 <doc>
#                                     Descriptor for the aperture setting when the exact technical details
#                                     are unknown or not directly controllable as the control software of
#                                     the microscope does not enable or was not configured to display these
#                                     values for users.
#                                 </doc>
#                             </field>
#                         </group>
#                         <!--NXaperture/size can be used as a fallback-->
#                         <group name="monochromatorID" type="NXmonochromator" nameType="partial" minOccurs="0" maxOccurs="unbounded">
#                             <field name="applied" type="NX_BOOLEAN"/>
#                             <field name="dispersion" type="NX_NUMBER" recommended="true"/>
#                             <field name="voltage" type="NX_NUMBER" recommended="true"/>
#                         </group>
#                         <group name="corrector_cs" type="NXcorrector_cs" minOccurs="0" maxOccurs="1">
#                             <field name="applied" type="NX_BOOLEAN" recommended="true"/>
#                             <group name="tableauID" type="NXprocess" nameType="partial" minOccurs="1" maxOccurs="unbounded">
#                                 <!--model(NX_CHAR):-->
#                                 <!--ceos-->
#                                 <group name="c_1" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="a_1" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="b_2" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="a_2" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="c_3" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="s_3" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="a_3" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="b_4" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="d_4" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="a_4" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="c_5" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="s_5" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="r_5" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="a_6" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <!--nion-->
#                                 <group name="c_1_0" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="c_1_2_a" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="c_1_2_b" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="c_2_1_a" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="c_2_1_b" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="c_2_3_a" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="c_2_3_b" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="c_3_0" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="c_3_2_a" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="c_3_2_b" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="c_3_4_a" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="c_3_4_b" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="c_4_1_a" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="c_4_1_b" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="c_4_3_a" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="c_4_3_b" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="c_4_5_a" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="c_4_5_b" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="c_5_0" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="c_5_2_a" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="c_5_2_b" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="c_5_4_a" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="c_5_4_b" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="c_5_6_a" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                                 <group name="c_5_6_b" type="NXaberration" optional="true">
#                                     <field name="magnitude" type="NX_NUMBER"/>
#                                 </group>
#                             </group>
#                         </group>
#                         <!--we could write down how to store the aberrations but we should not force to add aberrations
# basically optional use of NXaberration therein at least some value required-->
#                         <group name="corrector_ax" type="NXcomponent" minOccurs="0" maxOccurs="1">
#                             <field name="applied" type="NX_BOOLEAN"/>
#                             <field name="value_x" type="NX_NUMBER"/>
#                             <field name="value_y" type="NX_NUMBER"/>
#                         </group>
#                         <!--biprism(NXcomponent):-->
#                         <!--phaseplateID(NXcomponent):-->
#                         <group name="sensorID" type="NXsensor" nameType="partial" minOccurs="0" maxOccurs="unbounded"/>
#                         <group name="actuatorID" type="NXactuator" nameType="partial" minOccurs="0" maxOccurs="unbounded"/>
#                         <group name="beamID" type="NXbeam" nameType="partial" minOccurs="0" maxOccurs="unbounded"/>
#                         <group name="deflectorID" type="NXdeflector" nameType="partial" minOccurs="0" maxOccurs="unbounded"/>
#                     </group>
#                     <group name="ibeam_column" type="NXibeam_column" minOccurs="0" maxOccurs="1">
#                         <group name="ion_source" type="NXsource">
#                             <group name="probe" type="NXatom"/>
#                             <field name="voltage" type="NX_NUMBER"/>
#                             <field name="flux" type="NX_NUMBER"/>
#                         </group>
#                         <group name="lensID" type="NXlens_em" nameType="partial" minOccurs="0" maxOccurs="unbounded">
#                             <field name="power_setting" type="NX_CHAR_OR_NUMBER"/>
#                         </group>
#                         <group name="apertureID" type="NXaperture" nameType="partial" minOccurs="0" maxOccurs="unbounded">
#                             <field name="setting" type="NX_CHAR_OR_NUMBER">
#                                 <doc>
#                                     Descriptor for the aperture setting when the exact technical details
#                                     are unknown or not directly controllable as the control software of
#                                     the microscope does not enable or was not configured to display these
#                                     values for users.
#                                 </doc>
#                             </field>
#                         </group>
#                         <group name="monochromatorID" type="NXmonochromator" nameType="partial" minOccurs="0" maxOccurs="unbounded">
#                             <field name="applied" type="NX_BOOLEAN"/>
#                         </group>
#                         <group name="sensorID" type="NXsensor" nameType="partial" minOccurs="0" maxOccurs="unbounded"/>
#                         <group name="actuatorID" type="NXactuator" nameType="partial" minOccurs="0" maxOccurs="unbounded"/>
#                         <group name="beamID" type="NXbeam" nameType="partial" minOccurs="0" maxOccurs="unbounded"/>
#                         <group name="deflectorID" type="NXdeflector" minOccurs="0" maxOccurs="unbounded"/>
#                     </group>
#                     <group name="detectorID" type="NXdetector" nameType="partial" minOccurs="0" maxOccurs="unbounded">
#                         <field name="mode" type="NX_CHAR">
#                             <doc>
#                                 Operation mode of the detector as displayed by the control software.
#                             </doc>
#                         </field>
#                     </group>
#                     <group name="scan_controller" type="NXscanbox_em" optional="true">
#                         <field name="scan_schema" type="NX_CHAR"/>
#                         <field name="dwell_time" type="NX_NUMBER"/>
#                     </group>
#                     <group name="sensorID" type="NXsensor" nameType="partial" minOccurs="0" maxOccurs="unbounded"/>
#                     <group name="actuatorID" type="NXactuator" nameType="partial" minOccurs="0" maxOccurs="unbounded"/>
#                     <group name="stage" type="NXmanipulator" minOccurs="0" maxOccurs="unbounded">
#                         <field name="design" type="NX_CHAR" recommended="true"/>
#                         <field name="tilt1" type="NX_NUMBER"/>
#                         <field name="tilt2" type="NX_NUMBER"/>
#                         <field name="rotation" type="NX_NUMBER"/>
#                         <field name="position" type="NX_NUMBER"/>
#                         <group name="sample_heater" type="NXactuator" optional="true">
#                             <field name="physical_quantity" type="NX_CHAR"/>
#                             <field name="heater_current" type="NX_NUMBER" optional="true" units="NX_CURRENT">
#                                 <doc>
#                                     Nominal current of the heater.
#                                 </doc>
#                             </field>
#                             <field name="heater_voltage" type="NX_NUMBER" optional="true" units="NX_VOLTAGE">
#                                 <doc>
#                                     Nominal voltage of the heater.
#                                 </doc>
#                             </field>
#                             <field name="heater_power" type="NX_NUMBER" units="NX_POWER"/>
#                         </group>
#                     </group>
#                     <group name="optics" type="NXoptical_system_em" recommended="true"/>
#                 </group>
#             </group>
#         </group>
#         <group name="simulation" type="NXem_simulation" optional="true">
#             <doc>
#                 Documentation for a simulation of electron beam-matter interaction.
#             </doc>
#             <group name="programID" type="NXprogram" nameType="partial" recommended="true">
#                 <doc>
#                     The program with which the simulation was performed.
#                 </doc>
#                 <field name="program" type="NX_CHAR">
#                     <attribute name="version" type="NX_CHAR"/>
#                 </field>
#             </group>
#             <group name="environment" type="NXcollection" recommended="true">
#                 <doc>
#                     Programs and libraries representing the computational environment
#                 </doc>
#                 <group type="NXprogram" minOccurs="1" maxOccurs="unbounded">
#                     <field name="program" type="NX_CHAR">
#                         <attribute name="version" type="NX_CHAR"/>
#                     </field>
#                 </group>
#             </group>
#             <group name="config" type="NXparameters" optional="true">
#                 <doc>
#                     Configuration of the simulation
#                 </doc>
#             </group>
#             <group name="results" type="NXprocess" optional="true">
#                 <doc>
#                     Results of the simulation
#                 </doc>
#                 <group type="NXimage" minOccurs="0" maxOccurs="unbounded"/>
#                 <group type="NXspectrum" minOccurs="0" maxOccurs="unbounded"/>
#                 <group name="interaction_volumeID" type="NXinteraction_volume_em" nameType="partial" minOccurs="0" maxOccurs="unbounded">
#                     <group type="NXdata" recommended="true"/>
#                     <group type="NXprocess" recommended="true"/>
#                 </group>
#             </group>
#         </group>
#         <!--relevant research result post-processed for specific community methods
# but normalized in its representation ready to be consumed for
# research data management systems-->
#         <group name="roiID" type="NXroi" nameType="partial" minOccurs="0" maxOccurs="unbounded">
#             <doc>
#                 This concept is related to term `Region Of Interest`_ of the EMglossary standard.
#                 
#                 .. _Region Of Interest: https://purls.helmholtz-metadaten.de/emg/EMG_00000042
#             </doc>
#             <!--as soon as one entry is here constrained further
# an RDM can be sure to find specific pieces of information in a
# specific way but then every user of this application definition
# is required to provide such information in this way!-->
#             <group name="img" type="NXem_img" optional="true">
#                 <group name="imageID" type="NXimage" nameType="partial" minOccurs="1" maxOccurs="unbounded">
#                     <field name="imaging_mode" type="NX_CHAR"/>
#                     <group type="NXmicrostructure" optional="true"/>
#                 </group>
#             </group>
#             <group name="ebsd" type="NXem_ebsd" optional="true">
#                 <group name="gnomonic_reference_frame" type="NXcoordinate_system" optional="true">
#                     <field name="alias" type="NX_CHAR" optional="true"/>
#                     <field name="type" type="NX_CHAR"/>
#                     <field name="handedness" type="NX_CHAR"/>
#                     <field name="origin" type="NX_CHAR"/>
#                     <field name="x_direction" type="NX_CHAR"/>
#                     <field name="y_direction" type="NX_CHAR"/>
#                     <field name="z_direction" type="NX_CHAR"/>
#                 </group>
#                 <group name="pattern_center" type="NXprocess" recommended="true">
#                     <field name="x_boundary_convention" type="NX_CHAR"/>
#                     <field name="x_normalization_direction" type="NX_CHAR"/>
#                     <field name="y_boundary_convention" type="NX_CHAR"/>
#                     <field name="y_normalization_direction" type="NX_CHAR"/>
#                 </group>
#                 <group name="measurement" type="NXprocess" optional="true">
#                     <field name="depends_on" type="NX_CHAR"/>
#                     <group name="source" type="NXnote">
#                         <field name="type" type="NX_CHAR"/>
#                         <field name="file_name" type="NX_CHAR"/>
#                         <field name="checksum" type="NX_CHAR"/>
#                         <field name="algorithm" type="NX_CHAR"/>
#                     </group>
#                 </group>
#                 <group name="simulation" type="NXprocess" optional="true">
#                     <field name="depends_on" type="NX_CHAR"/>
#                     <group name="source" type="NXnote">
#                         <field name="type" type="NX_CHAR"/>
#                         <field name="file_name" type="NX_CHAR"/>
#                         <field name="checksum" type="NX_CHAR"/>
#                         <field name="algorithm" type="NX_CHAR"/>
#                     </group>
#                 </group>
#                 <group name="calibration" type="NXprocess" recommended="true"/>
#                 <group name="indexing" type="NXprocess" optional="true">
#                     <field name="number_of_scan_points" type="NX_UINT"/>
#                     <field name="indexing_rate" type="NX_NUMBER" recommended="true"/>
#                     <group name="source" type="NXnote" optional="true">
#                         <field name="type" type="NX_CHAR"/>
#                         <field name="file_name" type="NX_CHAR"/>
#                         <field name="checksum" type="NX_CHAR"/>
#                         <field name="algorithm" type="NX_CHAR"/>
#                     </group>
#                     <!--per scan point quantities (identifier_phase, matching_phase, positions, etc.)
# just using the implicit optional, for the database example in NOMAD we do
# not wish to duplicate all payload data-->
#                     <group name="phaseID" type="NXphase" nameType="partial" minOccurs="0" maxOccurs="unbounded">
#                         <field name="name" type="NX_CHAR" recommended="true"/>
#                         <field name="number_of_scan_points" type="NX_UINT"/>
#                         <group name="unit_cell" type="NXunit_cell">
#                             <field name="a_b_c" type="NX_NUMBER"/>
#                             <field name="alpha_beta_gamma" type="NX_NUMBER"/>
#                             <field name="space_group" type="NX_CHAR"/>
#                         </group>
#                         <!--foreseen place for phase-specific texture and microstructure representations and statistics-->
#                         <group name="IPF" type="NXmicrostructure_ipf" nameType="any" recommended="true">
#                             <field name="color_model" type="NX_CHAR"/>
#                             <field name="projection_direction" type="NX_NUMBER"/>
#                             <group name="map" type="NXdata">
#                                 <attribute name="signal" type="NX_CHAR"/>
#                                 <attribute name="axes" type="NX_CHAR"/>
#                                 <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
#                                 <field name="title" type="NX_CHAR" recommended="true"/>
#                                 <field name="data" type="NX_NUMBER">
#                                     <attribute name="long_name" type="NX_CHAR"/>
#                                 </field>
#                                 <field name="axis_x" type="NX_NUMBER">
#                                     <attribute name="long_name" type="NX_CHAR"/>
#                                 </field>
#                                 <field name="axis_y" type="NX_NUMBER" optional="true">
#                                     <attribute name="long_name" type="NX_CHAR"/>
#                                 </field>
#                                 <field name="axis_z" type="NX_NUMBER" optional="true">
#                                     <attribute name="long_name" type="NX_CHAR"/>
#                                 </field>
#                             </group>
#                             <group name="legend" type="NXdata">
#                                 <attribute name="signal" type="NX_CHAR"/>
#                                 <attribute name="axes" type="NX_CHAR"/>
#                                 <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
#                                 <field name="title" type="NX_CHAR" recommended="true"/>
#                                 <field name="data" type="NX_NUMBER">
#                                     <attribute name="long_name" type="NX_CHAR"/>
#                                 </field>
#                                 <field name="axis_x" type="NX_NUMBER">
#                                     <attribute name="long_name" type="NX_CHAR"/>
#                                 </field>
#                                 <field name="axis_y" type="NX_NUMBER">
#                                     <attribute name="long_name" type="NX_CHAR"/>
#                                 </field>
#                             </group>
#                         </group>
#                         <group name="ODF" type="NXmicrostructure_odf" nameType="any" optional="true"/>
#                         <group name="PF" type="NXmicrostructure_pf" nameType="any" optional="true"/>
#                         <group type="NXmicrostructure" optional="true"/>
#                     </group>
#                     <group name="roi" type="NXdata" recommended="true">
#                         <attribute name="signal" type="NX_CHAR"/>
#                         <attribute name="axes" type="NX_CHAR"/>
#                         <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
#                         <field name="title" type="NX_CHAR" recommended="true"/>
#                         <field name="descriptor" type="NX_CHAR"/>
#                         <field name="data" type="NX_NUMBER"/>
#                         <field name="axis_z" type="NX_NUMBER" optional="true">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_y" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                         <field name="axis_x" type="NX_NUMBER">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                     </group>
#                 </group>
#             </group>
#             <group name="eds" type="NXem_eds" optional="true">
#                 <!--remains to be discussed based on examples-->
#                 <group name="indexing" type="NXprocess">
#                     <group name="summary" type="NXdata" optional="true">
#                         <attribute name="signal" type="NX_CHAR"/>
#                         <attribute name="axes" type="NX_CHAR"/>
#                         <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
#                         <field name="title" type="NX_CHAR" recommended="true"/>
#                         <field name="intensity" type="NX_NUMBER"/>
#                         <field name="axis_energy" type="NX_CHAR">
#                             <attribute name="long_name" type="NX_CHAR"/>
#                         </field>
#                     </group>
#                     <field name="atom_types" type="NX_CHAR"/>
#                     <group type="NXimage" minOccurs="0" maxOccurs="118">
#                         <field name="iupac_line_candidates" type="NX_CHAR" recommended="true"/>
#                         <field name="energy_range" type="NX_NUMBER"/>
#                         <group name="image_2d" type="NXdata">
#                             <attribute name="signal" type="NX_CHAR"/>
#                             <attribute name="axes" type="NX_CHAR"/>
#                             <attribute name="AXISNAME_indices" type="NX_UINT" nameType="partial"/>
#                             <field name="title" type="NX_CHAR" recommended="true"/>
#                             <field name="intensity" type="NX_NUMBER">
#                                 <attribute name="units" type="NX_CHAR" recommended="true"/>
#                             </field>
#                             <field name="axis_i" type="NX_NUMBER">
#                                 <attribute name="long_name" type="NX_CHAR"/>
#                                 <attribute name="units" type="NX_CHAR"/>
#                             </field>
#                             <field name="axis_j" type="NX_NUMBER">
#                                 <attribute name="long_name" type="NX_CHAR"/>
#                                 <attribute name="units" type="NX_CHAR"/>
#                             </field>
#                         </group>
#                     </group>
#                 </group>
#             </group>
#             <group name="eels" type="NXem_eels" optional="true"/>
#         </group>
#     </group>
#     <!--see an example how to map e.g. the following flat schema https://www.zenodo.org/record/6513745 to NXem
# in https://github.com/FAIRmat-NFDI/nexus_definitions/commit/0b928c4352bc5636f673b5fb25ce990f1af8a099-->
# </definition>
