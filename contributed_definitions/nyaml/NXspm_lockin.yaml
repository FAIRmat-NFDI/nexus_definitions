category: base
doc: |
  A base class definition for a lock-in amplifier.
  
  The lock-in amplifier information: the device is being used to extract a (potentially)
  very weak input signal buried in the noisy background, where the input signal has
  the same frequency (or its harmonic) as carrier signal or reference signal, using heterodyne
  detection.
  
  This method extracts the amplitude and phase shift between input signal and reference signal.
  
  In single phase lock-in amplifiers used in high signal-to-noise ratio applications, only
  the amplitude is measured and phase difference is set to zero.
  
  In two phase lock-in amplifiers used in low signal-to-noise ratio applications, both the
  amplitude and phase difference are measured.
type: group
NXspm_lockin(NXamplifier):
  hardware(NXfabrication):
    doc: |
      Hardware manufacturers and type (product number) of lock-in amplifier.
  bias_divider:
    doc: |
      Bias divider for lock-in channel if it has.
      Bias divider = V(ref)/[V(ref)+V(input)]
  modulation_status(NX_BOOLEAN):
    doc: |
      Switch the lock-in modulation on or off.
  modulation_signal(NX_CHAR):
    doc: |
      Type of the modulation or reference signal, voltage | current.
  reference_amplitude(NX_NUMBER):
    unit: NX_ANY
    doc: |
      Amplitude of the reference signal for the lock-in amplifier.
      Unit could be NX_VOLTAGE or NX_CURRENT depending on the type of the reference signal.
  reference_frequency(NX_NUMBER):
    unit: NX_FREQUENCY
    doc: |
      Frequency of the reference signal for the lock-in amplifier.
  reference_phase(NX_NUMBER):
    unit: NX_ANGLE
    doc: |
      Phase of the reference signal set in the lock-in amplifier.
  phase_difference(NX_NUMBER):
    unit: NX_ANGLE
    doc: |
      Phase difference between the input signal and the reference signal.
      This is used in two phase lock-in amplifiers.
      In single phase lock-in amplifiers, this value is set to zero.
  demodulated_signal(NX_CHAR):
    doc: |
      Type of the demodulated signal,  current | voltage.
  demodulated_frequency(NX_NUMBER):
    unit: NX_FREQUENCY
    doc: |
      The frequency of the demodulated signal.
  frequency_modulation_bandwidth(NX_NUMBER):
    unit: NX_FREQUENCY
    doc: |
      The bandwidth of the modulating signal.
  phase_modulation_bandwidth(NX_NUMBER):
    unit: NX_FREQUENCY
    doc: |
      The bandwidth of the modulating signal over which modulated signal spreads.
  amplitude_modulation_bandwidth(NX_NUMBER):
    unit: NX_FREQUENCY
    doc: |
      The bandwidth of the modulating signal over which modulated signal spreads.
  
  # unit could be NX_VOLTAGE or NX_CURRENT
  demodulated_amplitude(NX_NUMBER):
    unit: NX_ANY
    doc: |
      The amplitude of the demodulated signal.
      Unit could be NX_VOLTAGE or NX_CURRENT depending on the type of the demodulated signal.
  demodulated_phase(NX_NUMBER):
    unit: NX_ANGLE
    doc: |
      The phase of the demodulated signal.
  demodulator_channels(NX_CHAR):
    doc: |
      List of the demodulator channels.
  low_pass_N(NX_NUMBER):
    nameType: partial
    unit: NX_FREQUENCY
    doc: |
      Frequency of the low-pass filter or cut-off frequency. Only signals belower
      then this frequency are passed through filter (for each Channels e.g., Demodulator channel).
  hi_pass_N(NX_NUMBER):
    nameType: partial
    unit: NX_FREQUENCY
    doc: |
      Frequency of the high-pass filter or cut-off frequency. Only signals above
      this frequency are passed through the filter (for each Channels e.g., Demodulator channel).
  lp_filter_order_N(NX_NUMBER):
    nameType: partial
    doc: |
      Order of the low-pass filter applied on the input or demodulated signals (X, Y).
      Reducing the bandwidth or increasing the order reduces noise on the demodulated signals,
      but increases settling and measurement times.
  hp_filter_order_N(NX_NUMBER):
    nameType: partial
    doc: |
      Order of the high-pass filter applied on the input or demodulated
      signal. This is used mainly to suppress a DC component of the input
      signal noise.
  ref_phase_N(NX_NUMBER):
    nameType: partial
    unit: NX_ANGLE
    doc: |
      An extra reference phase offset of reference signal with respect to the demodulated signal
      (for each Channels).
  integration_time(NX_NUMBER):
    unit: NX_TIME
    doc: |
      Integration time for the product of the input and the reference signals
  harmonic_order_N(NX_NUMBER):
    nameType: partial
    doc: |
      The reference signal can be a higher harmonic of the modulation signal.
      Here the order of the harmonic is stored.
  sensitivity_factor(NX_NUMBER):
    doc: |
      Ratio of output signal amplitude to input signal amplitude (V/V).

# ++++++++++++++++++++++++++++++++++ SHA HASH ++++++++++++++++++++++++++++++++++
# f6ffaaa6cfa71720858d5a5b2e70a235aac71016fa684d612196fb9b07bb973f
# <?xml version='1.0' encoding='UTF-8'?>
# <?xml-stylesheet type="text/xsl" href="nxdlformat.xsl"?>
# <!--
# # NeXus - Neutron and X-ray Common Data Format
# #
# # Copyright (C) 2014-2025 NeXus International Advisory Committee (NIAC)
# #
# # This library is free software; you can redistribute it and/or
# # modify it under the terms of the GNU Lesser General Public
# # License as published by the Free Software Foundation; either
# # version 3 of the License, or (at your option) any later version.
# #
# # This library is distributed in the hope that it will be useful,
# # but WITHOUT ANY WARRANTY; without even the implied warranty of
# # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# # Lesser General Public License for more details.
# #
# # You should have received a copy of the GNU Lesser General Public
# # License along with this library; if not, write to the Free Software
# # Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
# #
# # For further information, see http://www.nexusformat.org
# -->
# <definition xmlns="http://definition.nexusformat.org/nxdl/3.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" category="base" type="group" name="NXspm_lockin" extends="NXamplifier" xsi:schemaLocation="http://definition.nexusformat.org/nxdl/3.1 ../nxdl.xsd">
#     <doc>
#          A base class definition for a lock-in amplifier.
#          
#          The lock-in amplifier information: the device is being used to extract a (potentially)
#          very weak input signal buried in the noisy background, where the input signal has
#          the same frequency (or its harmonic) as carrier signal or reference signal, using heterodyne
#          detection.
#          
#          This method extracts the amplitude and phase shift between input signal and reference signal.
#          
#          In single phase lock-in amplifiers used in high signal-to-noise ratio applications, only 
#          the amplitude is measured and phase difference is set to zero.
#          
#          In two phase lock-in amplifiers used in low signal-to-noise ratio applications, both the 
#          amplitude and phase difference are measured.
#     </doc>
#     <group name="hardware" type="NXfabrication">
#         <doc>
#              Hardware manufacturers and type (product number) of lock-in amplifier.
#         </doc>
#     </group>
#     <field name="bias_divider">
#         <doc>
#              Bias divider for lock-in channel if it has.
#              Bias divider = V(ref)/[V(ref)+V(input)]
#         </doc>
#     </field>
#     <field name="modulation_status" type="NX_BOOLEAN">
#         <doc>
#              Switch the lock-in modulation on or off.
#         </doc>
#     </field>
#     <field name="modulation_signal" type="NX_CHAR">
#         <doc>
#              Type of the modulation or reference signal, voltage | current.
#         </doc>
#     </field>
#     <field name="reference_amplitude" type="NX_NUMBER" units="NX_ANY">
#         <doc>
#              Amplitude of the reference signal for the lock-in amplifier.
#              Unit could be NX_VOLTAGE or NX_CURRENT depending on the type of the reference signal.
#         </doc>
#     </field>
#     <field name="reference_frequency" type="NX_NUMBER" units="NX_FREQUENCY">
#         <doc>
#              Frequency of the reference signal for the lock-in amplifier.
#         </doc>
#     </field>
#     <field name="reference_phase" type="NX_NUMBER" units="NX_ANGLE">
#         <doc>
#              Phase of the reference signal set in the lock-in amplifier.
#         </doc>
#     </field>
#     <field name="phase_difference" type="NX_NUMBER" units="NX_ANGLE">
#         <doc>
#              Phase difference between the input signal and the reference signal.
#              This is used in two phase lock-in amplifiers.
#              In single phase lock-in amplifiers, this value is set to zero.
#         </doc>
#     </field>
#     <field name="demodulated_signal" type="NX_CHAR">
#         <doc>
#              Type of the demodulated signal,  current | voltage.
#         </doc>
#     </field>
#     <field name="demodulated_frequency" type="NX_NUMBER" units="NX_FREQUENCY">
#         <doc>
#              The frequency of the demodulated signal.
#         </doc>
#     </field>
#     <field name="frequency_modulation_bandwidth" type="NX_NUMBER" units="NX_FREQUENCY">
#         <doc>
#              The bandwidth of the modulating signal.
#         </doc>
#     </field>
#     <field name="phase_modulation_bandwidth" type="NX_NUMBER" units="NX_FREQUENCY">
#         <doc>
#              The bandwidth of the modulating signal over which modulated signal spreads.
#         </doc>
#     </field>
#     <field name="amplitude_modulation_bandwidth" type="NX_NUMBER" units="NX_FREQUENCY">
#         <doc>
#              The bandwidth of the modulating signal over which modulated signal spreads.
#         </doc>
#     </field>
#     <!--unit could be NX_VOLTAGE or NX_CURRENT-->
#     <field name="demodulated_amplitude" type="NX_NUMBER" units="NX_ANY">
#         <doc>
#              The amplitude of the demodulated signal.
#              Unit could be NX_VOLTAGE or NX_CURRENT depending on the type of the demodulated signal.
#         </doc>
#     </field>
#     <field name="demodulated_phase" type="NX_NUMBER" units="NX_ANGLE">
#         <doc>
#              The phase of the demodulated signal.
#         </doc>
#     </field>
#     <field name="demodulator_channels" type="NX_CHAR">
#         <doc>
#              List of the demodulator channels.
#         </doc>
#     </field>
#     <field name="low_pass_N" type="NX_NUMBER" nameType="partial" units="NX_FREQUENCY">
#         <doc>
#              Frequency of the low-pass filter or cut-off frequency. Only signals belower 
#              then this frequency are passed through filter (for each Channels e.g., Demodulator channel).
#         </doc>
#     </field>
#     <field name="hi_pass_N" type="NX_NUMBER" nameType="partial" units="NX_FREQUENCY">
#         <doc>
#              Frequency of the high-pass filter or cut-off frequency. Only signals above 
#              this frequency are passed through the filter (for each Channels e.g., Demodulator channel).
#         </doc>
#     </field>
#     <field name="lp_filter_order_N" type="NX_NUMBER" nameType="partial">
#         <doc>
#              Order of the low-pass filter applied on the input or demodulated signals (X, Y).
#              Reducing the bandwidth or increasing the order reduces noise on the demodulated signals,
#              but increases settling and measurement times.
#         </doc>
#     </field>
#     <field name="hp_filter_order_N" type="NX_NUMBER" nameType="partial">
#         <doc>
#              Order of the high-pass filter applied on the input or demodulated
#              signal. This is used mainly to suppress a DC component of the input
#              signal noise.
#         </doc>
#     </field>
#     <field name="ref_phase_N" type="NX_NUMBER" nameType="partial" units="NX_ANGLE">
#         <doc>
#              An extra reference phase offset of reference signal with respect to the demodulated signal
#              (for each Channels).
#         </doc>
#     </field>
#     <field name="integration_time" type="NX_NUMBER" units="NX_TIME">
#         <doc>
#              Integration time for the product of the input and the reference signals
#         </doc>
#     </field>
#     <field name="harmonic_order_N" type="NX_NUMBER" nameType="partial">
#         <doc>
#              The reference signal can be a higher harmonic of the modulation signal.
#              Here the order of the harmonic is stored.
#         </doc>
#     </field>
#     <field name="sensitivity_factor" type="NX_NUMBER">
#         <doc>
#              Ratio of output signal amplitude to input signal amplitude (V/V).
#         </doc>
#     </field>
# </definition>
