category: application
doc: |
  An application definition to describe atomic force microscopy (AFM).
type: group
NXafm(NXspm):
  (NXentry):
    definition:
      doc: |
        Name of the definition that is used for the application.
      enumeration: [NXafm]
    experiment_technique:
      doc: |
        The AFM technique.
      enumeration: [AFM]
    scan_mode:
      doc: |
        The mode of the scan.
        
        contact mode: Cantilever attempts to move on the sample surface in very close contact with the sample.
         The cantilever deflection is usually emplloyed to control the cantilever position using a PID feedback loop.
        non-contact mode: Cantilever attempts to oscillate above the sample surface. Cantilever attempts to stay in the
         interaction (atomic force) zone therefore cantilever oscillator amplitude and frequency are deformed.
         The cantilever frequecy or oscillation amplitude is usually employed to control the cantilever position using a PID feedback loop.
        tapping mode: Resembles to the non-contact mode, but at every point of scan the cantilever tip comes closer
         to the sample surface ("taps it").
         The cantilever oscillation amplitude is usually employed to control the cantilever position using a PID feedback loop.
        peak force tapping mode: Like the tapping mode, but at each point of the scan force-distance curve is recorded.
         The maximum force is usually employed to control the cantilever position using a PID feedback loop.
      enumeration:
        open_enum: true
        items: [contact mode, tapping mode, non-contact mode, peak force tapping mode]
    (NXinstrument):
      photo_detector(NXdetector):
        exists: optional
        doc: |
          Information about the quadrant photodiode deflection detector or interferometer.
        (NXsensor):
          exists: optional
          doc: |
            The sensor information for the photodiode or interferometer.
      (NXspm_cantilever):
        exists: recommended
        doc: |
          The cantilever information.
        cantilever_oscillator(NXspm_cantilever_oscillator):
          exists: recommended
          doc: |
            When a cantilever is oscillated close to its resonance, this describes the oscillator properties.
            
            A cantilever can be used in direct contact mode to detect interaction forces or oscillated close to its
            resonance frequency. Changes in the oscillation amplitude, phase (between oscillated tail and moving tip)
            or resonance frequency are very sensitive to changes in the interaction potential field, giving rise of
            various measurement modes, such as non-contact or intermittent-contact (tapping) modes.
          reference_amplitude:
            unit: NX_LENGTH
            exists: recommended
            doc: |
              The reference amplitude (also called driver amplitude) of the cantilever.
              This is the amplitude of the cantilever oscillation when no external forces are acting on it.
              
              Note: At least one from reference_amplitude, reference_frequency, or reference_phase is expected.
          reference_frequency:
            unit: NX_FREQUENCY
            exists: recommended
            doc: |
              The reference frequency (also called driver frequency) of
              the cantilever.
              
              Note: At least one from reference_amplitude, reference_frequency, or reference_phase is expected.
          reference_phase:
            unit: NX_ANGLE
            exists: recommended
            doc: |
              The reference phase of the cantilever.
              
              Note: At least one from reference_amplitude, reference_frequency, or reference_phase is expected.
        phase_positioner(NXpositioner):
          exists: recommended
          doc: |
            The phase positioner of the cantilever.
        amplitude_positioner(NXpositioner):
          exists: recommended
          doc: |
            The amplitude positioner of the cantilever.
      phase_lock_loop(NXspm_lockin):
        doc: |
          Phase locked loop for cantilever lock-in device.
      SCAN_ENVIRONMENT(NXenvironment):
        doc: |
          The environment information.
        height_piezo_sensor(NXspm_piezo_sensor):
          exists: optional
          doc: |
            This should be a link to the concept
            ENTRY[*]/INSTRUMENT[*]/height_piezo_sensor.
            
            Note: group name (could be any meaningful and relevant name e.g. entry in ENTRY[entry]) inside the
            square bracket would be the `exact` name of the NXentry group.
        XYpiezo_sensor(NXspm_piezo_sensor):
          nameType: partial
          exists: optional
          doc: |
            This should be a link to the concept
            ENTRY[*]/INSTRUMENT[*]/XY_piezo_sensor.
            
            Note: group name (could be any meaningful and relevant name e.g. entry in ENTRY[entry]) inside the
            square bracket would be the `exact` name of the NXentry group.
        head_temperature_sensor(NXsensor):
          exists: optional
          doc: |
            This should be a link to the concept
            ENTRY[*]/INSTRUMENT[*]/head_temperature_sensor.
            
            Note: group name (could be any meaningful and relevant name e.g. entry in ENTRY[entry]) inside the
            square bracket would be the `exact` name of the NXentry group.
      height_piezo_sensor(NXspm_piezo_sensor):
        nameType: specified
        exists: optional
        doc: |
          The sensor information for the height (Z-axis) piezo device.
      XYpiezo_sensor(NXspm_piezo_sensor):
        nameType: partial
        exists: optional
        doc: |
          The sensor information for the xy piezo device.
      head_temperature_sensor(NXsensor):
        exists: optional
        doc: |
          The temperature of the scan environment or head of the cantilever.
    reproducibility_indicators(NXcollection):
      exists: optional
      doc: |
        The group of indicators (links to the existing fields in different groups) that measure
        the reproducibility of the experiment.
      cantilever_head_temperature(NX_NUMBER):
        exists: optional
        doc: |
          This should be a link to
          /ENTRY[*]/INSTRUMENT[*]/scan_environment/head_temperature
          
          Note: group name (could be any meaningful and relevant name e.g. entry in ENTRY[entry]) inside the
          square bracket would be the `exact` name of the NXentry group.
      cryo_bottom_temperature(NX_NUMBER):
        exists: optional
        doc: |
          This should be a link to
          /ENTRY[*]/INSTRUMENT[*]/scan_environment/cryo_bottom_temperature
          
          Note: group name (could be any meaningful and relevant name e.g. entry in ENTRY[entry]) inside the
          square bracket would be the `exact` name of the NXentry group.
      cryo_shield_temperature(NX_NUMBER):
        exists: optional
        doc: |
          This should be a link to
          /ENTRY[*]/INSTRUMENT[*]/scan_environment/cryo_shield_temperature
          
          Note: group name (could be any meaningful and relevant name e.g. entry in ENTRY[entry]) inside the
          square bracket would be the `exact` name of the NXentry group.
      cantilever_oscillator(NXspm_cantilever_oscillator):
        exists: optional
        doc: |
          This should be a link to
          /ENTRY[*]/INSTRUMENT[*]/cantilever_spm/cantilever_oscillator
          
          Note: group name (could be any meaningful and relevant name e.g. entry in ENTRY[entry]) inside the
          square bracket would be the `exact` name of the NXentry group.
    resolution_indicators(NXcollection):
      exists: optional
      doc: |
        The group of indicators (links to the existing fields in different groups) that
      cantilever_head_temperature(NX_NUMBER):
        exists: optional
        doc: |
          This should be a link to
          /ENTRY[*]/INSTRUMENT[*]/scan_environment/head_temperature
          
          Note: group name (could be any meaningful and relevant name e.g. entry in ENTRY[entry]) inside the
          square bracket would be the `exact` name of the NXentry group.
      cryo_bottom_temperature(NX_NUMBER):
        exists: optional
        doc: |
          This should be a link to
          /ENTRY[*]/INSTRUMENT[*]/scan_environment/cryo_bottom_temperature
          
          Note: group name (could be any meaningful and relevant name e.g. entry in ENTRY[entry]) inside the
          square bracket would be the `exact` name of the NXentry group.
      cryo_shield_temperature(NX_NUMBER):
        exists: optional
        doc: |
          This should be a link to
          /ENTRY[*]/INSTRUMENT[*]/scan_environment/cryo_shield_temperature
          
          Note: group name (could be any meaningful and relevant name e.g. entry in ENTRY[entry]) inside the
          square bracket would be the `exact` name of the NXentry group.
      cantilever_config(NX_NUMBER):
        exists: optional
        doc: |
          This should be a link to
          /ENTRY[*]/INSTRUMENT[*]/cantilever_spm/cantilever_config
          
          Note: group name (could be any meaningful and relevant name e.g. entry in ENTRY[entry]) inside the
          square bracket would be the `exact` name of the NXentry group.
      amplitude_excitation(NX_NUMBER):
        exists: optional
        doc: |
          This should be a link to
          /ENTRY[*]/INSTRUMENT[*]/phase_lock_loop/amplitude_excitation
          
          Note: group name (could be any meaningful and relevant name e.g. entry in ENTRY[entry]) inside the
          square bracket would be the `exact` name of the NXentry group.

# ++++++++++++++++++++++++++++++++++ SHA HASH ++++++++++++++++++++++++++++++++++
# b2dbde7e1d44e3f6f57c3b71eb477f8119ae2287e63ee7898ebec68dba66da82
# <?xml version='1.0' encoding='UTF-8'?>
# <?xml-stylesheet type="text/xsl" href="nxdlformat.xsl"?>
# <!--
# # NeXus - Neutron and X-ray Common Data Format
# #
# # Copyright (C) 2024-2025 NeXus International Advisory Committee (NIAC)
# #
# # This library is free software; you can redistribute it and/or
# # modify it under the terms of the GNU Lesser General Public
# # License as published by the Free Software Foundation; either
# # version 3 of the License, or (at your option) any later version.
# #
# # This library is distributed in the hope that it will be useful,
# # but WITHOUT ANY WARRANTY; without even the implied warranty of
# # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# # Lesser General Public License for more details.
# #
# # You should have received a copy of the GNU Lesser General Public
# # License along with this library; if not, write to the Free Software
# # Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
# #
# # For further information, see http://www.nexusformat.org
# -->
# <definition xmlns="http://definition.nexusformat.org/nxdl/3.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" category="application" type="group" name="NXafm" extends="NXspm" xsi:schemaLocation="http://definition.nexusformat.org/nxdl/3.1 ../nxdl.xsd">
#     <doc>
#         An application definition to describe atomic force microscopy (AFM).
#     </doc>
#     <group type="NXentry">
#         <field name="definition">
#             <doc>
#                 Name of the definition that is used for the application.
#             </doc>
#             <enumeration>
#                 <item value="NXafm"/>
#             </enumeration>
#         </field>
#         <field name="experiment_technique">
#             <doc>
#                 The AFM technique.
#             </doc>
#             <enumeration>
#                 <item value="AFM"/>
#             </enumeration>
#         </field>
#         <field name="scan_mode">
#             <doc>
#                 The mode of the scan.
#                 
#                 contact mode: Cantilever attempts to move on the sample surface in very close contact with the sample.
#                  The cantilever deflection is usually emplloyed to control the cantilever position using a PID feedback loop.
#                 non-contact mode: Cantilever attempts to oscillate above the sample surface. Cantilever attempts to stay in the
#                  interaction (atomic force) zone therefore cantilever oscillator amplitude and frequency are deformed.
#                  The cantilever frequecy or oscillation amplitude is usually employed to control the cantilever position using a PID feedback loop.
#                 tapping mode: Resembles to the non-contact mode, but at every point of scan the cantilever tip comes closer
#                  to the sample surface ("taps it").
#                  The cantilever oscillation amplitude is usually employed to control the cantilever position using a PID feedback loop.
#                 peak force tapping mode: Like the tapping mode, but at each point of the scan force-distance curve is recorded. 
#                  The maximum force is usually employed to control the cantilever position using a PID feedback loop.
#             </doc>
#             <enumeration open="true">
#                 <item value="contact mode"/>
#                 <item value="tapping mode"/>
#                 <item value="non-contact mode"/>
#                 <item value="peak force tapping mode"/>
#             </enumeration>
#         </field>
#         <group type="NXinstrument">
#             <group name="photo_detector" type="NXdetector" optional="true">
#                 <doc>
#                     Information about the quadrant photodiode deflection detector or interferometer.
#                 </doc>
#                 <group type="NXsensor" optional="true">
#                     <doc>
#                         The sensor information for the photodiode or interferometer.
#                     </doc>
#                 </group>
#             </group>
#             <group type="NXspm_cantilever" recommended="true">
#                 <doc>
#                     The cantilever information.
#                 </doc>
#                 <group name="cantilever_oscillator" type="NXspm_cantilever_oscillator" recommended="true">
#                     <doc>
#                         When a cantilever is oscillated close to its resonance, this describes the oscillator properties.
#                         
#                         A cantilever can be used in direct contact mode to detect interaction forces or oscillated close to its
#                         resonance frequency. Changes in the oscillation amplitude, phase (between oscillated tail and moving tip)
#                         or resonance frequency are very sensitive to changes in the interaction potential field, giving rise of
#                         various measurement modes, such as non-contact or intermittent-contact (tapping) modes.
#                     </doc>
#                     <field name="reference_amplitude" units="NX_LENGTH" recommended="true">
#                         <doc>
#                             The reference amplitude (also called driver amplitude) of the cantilever.
#                             This is the amplitude of the cantilever oscillation when no external forces are acting on it.
#                             
#                             Note: At least one from reference_amplitude, reference_frequency, or reference_phase is expected.
#                         </doc>
#                     </field>
#                     <field name="reference_frequency" units="NX_FREQUENCY" recommended="true">
#                         <doc>
#                             The reference frequency (also called driver frequency) of
#                             the cantilever.
#                             
#                             Note: At least one from reference_amplitude, reference_frequency, or reference_phase is expected.
#                         </doc>
#                     </field>
#                     <field name="reference_phase" units="NX_ANGLE" recommended="true">
#                         <doc>
#                             The reference phase of the cantilever.
#                             
#                             Note: At least one from reference_amplitude, reference_frequency, or reference_phase is expected.
#                         </doc>
#                     </field>
#                 </group>
#                 <group name="phase_positioner" type="NXpositioner" recommended="true">
#                     <doc>
#                         The phase positioner of the cantilever.
#                     </doc>
#                 </group>
#                 <group name="amplitude_positioner" type="NXpositioner" recommended="true">
#                     <doc>
#                         The amplitude positioner of the cantilever.
#                     </doc>
#                 </group>
#             </group>
#             <group name="phase_lock_loop" type="NXspm_lockin">
#                 <doc>
#                     Phase locked loop for cantilever lock-in device.
#                 </doc>
#             </group>
#             <group name="SCAN_ENVIRONMENT" type="NXenvironment">
#                 <doc>
#                     The environment information.
#                 </doc>
#                 <group name="height_piezo_sensor" type="NXspm_piezo_sensor" optional="true">
#                     <doc>
#                         This should be a link to the concept
#                         ENTRY[*]/INSTRUMENT[*]/height_piezo_sensor.
#                         
#                         Note: group name (could be any meaningful and relevant name e.g. entry in ENTRY[entry]) inside the
#                         square bracket would be the `exact` name of the NXentry group.
#                     </doc>
#                 </group>
#                 <group name="XYpiezo_sensor" type="NXspm_piezo_sensor" nameType="partial" optional="true">
#                     <doc>
#                         This should be a link to the concept
#                         ENTRY[*]/INSTRUMENT[*]/XY_piezo_sensor.
#                         
#                         Note: group name (could be any meaningful and relevant name e.g. entry in ENTRY[entry]) inside the
#                         square bracket would be the `exact` name of the NXentry group.
#                     </doc>
#                 </group>
#                 <group name="head_temperature_sensor" type="NXsensor" optional="true">
#                     <doc>
#                         This should be a link to the concept
#                         ENTRY[*]/INSTRUMENT[*]/head_temperature_sensor.
#                         
#                         Note: group name (could be any meaningful and relevant name e.g. entry in ENTRY[entry]) inside the
#                         square bracket would be the `exact` name of the NXentry group.
#                     </doc>
#                 </group>
#             </group>
#             <group name="height_piezo_sensor" type="NXspm_piezo_sensor" nameType="specified" optional="true">
#                 <doc>
#                     The sensor information for the height (Z-axis) piezo device.
#                 </doc>
#             </group>
#             <group name="XYpiezo_sensor" type="NXspm_piezo_sensor" nameType="partial" optional="true">
#                 <doc>
#                     The sensor information for the xy piezo device.
#                 </doc>
#             </group>
#             <group name="head_temperature_sensor" type="NXsensor" optional="true">
#                 <doc>
#                     The temperature of the scan environment or head of the cantilever.
#                 </doc>
#             </group>
#         </group>
#         <group name="reproducibility_indicators" type="NXcollection" optional="true">
#             <doc>
#                 The group of indicators (links to the existing fields in different groups) that measure
#                 the reproducibility of the experiment.
#             </doc>
#             <field name="cantilever_head_temperature" type="NX_NUMBER" optional="true">
#                 <doc>
#                     This should be a link to
#                     /ENTRY[*]/INSTRUMENT[*]/scan_environment/head_temperature
#                     
#                     Note: group name (could be any meaningful and relevant name e.g. entry in ENTRY[entry]) inside the
#                     square bracket would be the `exact` name of the NXentry group.
#                 </doc>
#             </field>
#             <field name="cryo_bottom_temperature" type="NX_NUMBER" optional="true">
#                 <doc>
#                     This should be a link to
#                     /ENTRY[*]/INSTRUMENT[*]/scan_environment/cryo_bottom_temperature
#                     
#                     Note: group name (could be any meaningful and relevant name e.g. entry in ENTRY[entry]) inside the
#                     square bracket would be the `exact` name of the NXentry group.
#                 </doc>
#             </field>
#             <field name="cryo_shield_temperature" type="NX_NUMBER" optional="true">
#                 <doc>
#                     This should be a link to
#                     /ENTRY[*]/INSTRUMENT[*]/scan_environment/cryo_shield_temperature
#                     
#                     Note: group name (could be any meaningful and relevant name e.g. entry in ENTRY[entry]) inside the
#                     square bracket would be the `exact` name of the NXentry group.
#                 </doc>
#             </field>
#             <group name="cantilever_oscillator" type="NXspm_cantilever_oscillator" optional="true">
#                 <doc>
#                     This should be a link to
#                     /ENTRY[*]/INSTRUMENT[*]/cantilever_spm/cantilever_oscillator
#                     
#                     Note: group name (could be any meaningful and relevant name e.g. entry in ENTRY[entry]) inside the
#                     square bracket would be the `exact` name of the NXentry group.
#                 </doc>
#             </group>
#         </group>
#         <group name="resolution_indicators" type="NXcollection" optional="true">
#             <doc>
#                 The group of indicators (links to the existing fields in different groups) that
#             </doc>
#             <field name="cantilever_head_temperature" type="NX_NUMBER" optional="true">
#                 <doc>
#                     This should be a link to
#                     /ENTRY[*]/INSTRUMENT[*]/scan_environment/head_temperature
#                     
#                     Note: group name (could be any meaningful and relevant name e.g. entry in ENTRY[entry]) inside the
#                     square bracket would be the `exact` name of the NXentry group.
#                 </doc>
#             </field>
#             <field name="cryo_bottom_temperature" type="NX_NUMBER" optional="true">
#                 <doc>
#                     This should be a link to
#                     /ENTRY[*]/INSTRUMENT[*]/scan_environment/cryo_bottom_temperature
#                     
#                     Note: group name (could be any meaningful and relevant name e.g. entry in ENTRY[entry]) inside the
#                     square bracket would be the `exact` name of the NXentry group.
#                 </doc>
#             </field>
#             <field name="cryo_shield_temperature" type="NX_NUMBER" optional="true">
#                 <doc>
#                     This should be a link to
#                     /ENTRY[*]/INSTRUMENT[*]/scan_environment/cryo_shield_temperature
#                     
#                     Note: group name (could be any meaningful and relevant name e.g. entry in ENTRY[entry]) inside the
#                     square bracket would be the `exact` name of the NXentry group.
#                 </doc>
#             </field>
#             <field name="cantilever_config" type="NX_NUMBER" optional="true">
#                 <doc>
#                     This should be a link to
#                     /ENTRY[*]/INSTRUMENT[*]/cantilever_spm/cantilever_config
#                     
#                     Note: group name (could be any meaningful and relevant name e.g. entry in ENTRY[entry]) inside the
#                     square bracket would be the `exact` name of the NXentry group.
#                 </doc>
#             </field>
#             <field name="amplitude_excitation" type="NX_NUMBER" optional="true">
#                 <doc>
#                     This should be a link to
#                     /ENTRY[*]/INSTRUMENT[*]/phase_lock_loop/amplitude_excitation
#                     
#                     Note: group name (could be any meaningful and relevant name e.g. entry in ENTRY[entry]) inside the
#                     square bracket would be the `exact` name of the NXentry group.
#                 </doc>
#             </field>
#         </group>
#     </group>
# </definition>
