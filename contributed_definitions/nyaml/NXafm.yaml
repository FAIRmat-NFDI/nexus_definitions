category: application
doc: |
  An application definition to describe Atomic Force Microscopy (AFM) scanning
  technique.
type: group
NXafm(NXspm):
  (NXentry):
    definition:
      doc: |
        Name of the definition that is used for the application.
      enumeration: [NXafm]
    scan_mode:
      doc: |
        The mode of the scan.
      enumeration: [contact mode, tapping mode, non-contact mode]
    experiment_instrument(NXinstrument):
      doc: |
        The group explains the core instruments' setup of the AFM experiment as well as the environment of the corresponding
        instruments.
      photo_detector(NXdetector):
        exists: optional
        doc: |
          The photo detector instrument information.
      (NXcantilever_spm):
        exists: optional
        doc: |
          The cantilever information.
        cantilever_oscillator(NXobject):
          exists: optional
          doc: |
            Generally speaking, the cantilever resembles a simple harmonic oscillator.
            When the cantilever tip is close to the surface of the sample, an attractive or repulsive force appears between the cantilever and the sample, deforming the cantilever. The detector (typically a photodiode) measures this deformation and, therefore, the force acting on the cantilever.
            In a typical AFM scan cantilever moves toward the surface of the sample until a user-defined value of force acting on the cantilever is reached. The measured force is used as an input of a PID feedback loop, and the output of this loop controls the vertical position of the cantilever.
          oscillator_excitation(NX_NUMBER):
            exists: optional
            unit: NX_ANY
            doc: |
              The threshold voltage for oscillator excitation.
          phase_lock_loop(NXlockin):
            exists: optional
            doc: |
              Phase locked loop for cantilever lock-in device.
            amplitude_excitation(NX_NUMBER):
              exists: optional
              unit: NX_ANY
              doc: |
                The reference amplitude (also called drive amplitude) of the cantilever.
      scan_environment(NXenvironment):
        doc: |
          The environment information.
        height_piezo_sensor(NXsensor):
          doc: |
            Link to the group ENTRY[entry]/experiment_instrument/height_piezo_sensor.
        XY_piezo_sensor(NXsensor):
          doc: |
            Link to the group ENTRY[entry]/experiment_instrument/XY_piezo_sensor.
        tip_temperature(NXsensor):
          doc: |
            Link to the group ENTRY[entry]/experiment_instrument/cantilever_temperature.
      height_piezo_sensor(NXsensor):
        exists: optional
        doc: |
          The sensor information for the height piezo device.
        piezo_configuration(NXpiezo_config_spm):
          doc: |
            The piezo configuration information like piezoelectric calibration and material
            properties.
          piezo_material(NXpiezoelectric_material):
            exists: optional
            doc: |
              The material description and properties of the piezoelectric scanner materials.
        (NXpositioner_spm):
          doc: |
            The positioner information like the position of the tip, the position of the
            sample, PID loop feedback etc.
      XY_piezo_sensor(NXsensor):
        exists: optional
        doc: |
          The sensor information for the xy piezo device.
        piezo_configuration(NXpiezo_config_spm):
          doc: |
            The piezo configuration information like piezoelectric calibration and material
            properties.
          piezo_material(NXpiezoelectric_material):
            exists: optional
            doc: |
              The material description and properties of the piezoelectric scanner materials.
        (NXpositioner_spm):
          doc: |
            The positioner information like the position of the tip, the position of the
            sample, PID loop feedback etc.
      tip_temperature(NXsensor):
        exists: optional
        doc: |
          The temperature of the scan environment or tip of the cantilever.

# ++++++++++++++++++++++++++++++++++ SHA HASH ++++++++++++++++++++++++++++++++++
# 9a15a1db7f7822d982716a9c177ce05e6afeb165692bf2ac13dbc98aad4809dd
# <?xml version='1.0' encoding='UTF-8'?>
# <?xml-stylesheet type="text/xsl" href="nxdlformat.xsl"?>
# <!--
# # NeXus - Neutron and X-ray Common Data Format
# #
# # Copyright (C) 2014-2024 NeXus International Advisory Committee (NIAC)
# #
# # This library is free software; you can redistribute it and/or
# # modify it under the terms of the GNU Lesser General Public
# # License as published by the Free Software Foundation; either
# # version 3 of the License, or (at your option) any later version.
# #
# # This library is distributed in the hope that it will be useful,
# # but WITHOUT ANY WARRANTY; without even the implied warranty of
# # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# # Lesser General Public License for more details.
# #
# # You should have received a copy of the GNU Lesser General Public
# # License along with this library; if not, write to the Free Software
# # Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
# #
# # For further information, see http://www.nexusformat.org
# -->
# <definition xmlns="http://definition.nexusformat.org/nxdl/3.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" category="application" type="group" name="NXafm" extends="NXspm" xsi:schemaLocation="http://definition.nexusformat.org/nxdl/3.1 ../nxdl.xsd">
#     <doc>
#          An application definition to describe Atomic Force Microscopy (AFM) scanning
#          technique.
#     </doc>
#     <group type="NXentry">
#         <field name="definition">
#             <doc>
#                  Name of the definition that is used for the application.
#             </doc>
#             <enumeration>
#                 <item value="NXafm"/>
#             </enumeration>
#         </field>
#         <field name="scan_mode">
#             <doc>
#                  The mode of the scan.
#             </doc>
#             <enumeration>
#                 <item value="contact mode"/>
#                 <item value="tapping mode"/>
#                 <item value="non-contact mode"/>
#             </enumeration>
#         </field>
#         <group name="experiment_instrument" type="NXinstrument">
#             <doc>
#                  The group explains the core instruments' setup of the AFM experiment as well as the environment of the corresponding
#                  instruments.
#             </doc>
#             <group name="photo_detector" type="NXdetector" optional="true">
#                 <doc>
#                      The photo detector instrument information.
#                 </doc>
#             </group>
#             <group type="NXcantilever_spm" optional="true">
#                 <doc>
#                      The cantilever information.
#                 </doc>
#                 <group name="cantilever_oscillator" type="NXobject" optional="true">
#                     <doc>
#                          Generally speaking, the cantilever resembles a simple harmonic oscillator.
#                          When the cantilever tip is close to the surface of the sample, an attractive or repulsive force appears between the cantilever and the sample, deforming the cantilever. The detector (typically a photodiode) measures this deformation and, therefore, the force acting on the cantilever.
#                          In a typical AFM scan cantilever moves toward the surface of the sample until a user-defined value of force acting on the cantilever is reached. The measured force is used as an input of a PID feedback loop, and the output of this loop controls the vertical position of the cantilever.
#                     </doc>
#                     <field name="oscillator_excitation" type="NX_NUMBER" optional="true" units="NX_ANY">
#                         <doc>
#                              The threshold voltage for oscillator excitation.
#                         </doc>
#                     </field>
#                     <group name="phase_lock_loop" type="NXlockin" optional="true">
#                         <doc>
#                              Phase locked loop for cantilever lock-in device.
#                         </doc>
#                         <field name="amplitude_excitation" type="NX_NUMBER" optional="true" units="NX_ANY">
#                             <doc>
#                                  The reference amplitude (also called drive amplitude) of the cantilever.
#                             </doc>
#                         </field>
#                     </group>
#                 </group>
#             </group>
#             <group name="scan_environment" type="NXenvironment">
#                 <doc>
#                      The environment information.
#                 </doc>
#                 <group name="height_piezo_sensor" type="NXsensor">
#                     <doc>
#                          Link to the group ENTRY[entry]/experiment_instrument/height_piezo_sensor.
#                     </doc>
#                 </group>
#                 <group name="XY_piezo_sensor" type="NXsensor">
#                     <doc>
#                          Link to the group ENTRY[entry]/experiment_instrument/XY_piezo_sensor.
#                     </doc>
#                 </group>
#                 <group name="tip_temperature" type="NXsensor">
#                     <doc>
#                          Link to the group ENTRY[entry]/experiment_instrument/cantilever_temperature.
#                     </doc>
#                 </group>
#             </group>
#             <group name="height_piezo_sensor" type="NXsensor" optional="true">
#                 <doc>
#                      The sensor information for the height piezo device.
#                 </doc>
#                 <group name="piezo_configuration" type="NXpiezo_config_spm">
#                     <doc>
#                          The piezo configuration information like piezoelectric calibration and material
#                          properties.
#                     </doc>
#                     <group name="piezo_material" type="NXpiezoelectric_material" optional="true">
#                         <doc>
#                              The material description and properties of the piezoelectric scanner materials.
#                         </doc>
#                     </group>
#                 </group>
#                 <group type="NXpositioner_spm">
#                     <doc>
#                          The positioner information like the position of the tip, the position of the
#                          sample, PID loop feedback etc.
#                     </doc>
#                 </group>
#             </group>
#             <group name="XY_piezo_sensor" type="NXsensor" optional="true">
#                 <doc>
#                      The sensor information for the xy piezo device.
#                 </doc>
#                 <group name="piezo_configuration" type="NXpiezo_config_spm">
#                     <doc>
#                          The piezo configuration information like piezoelectric calibration and material
#                          properties.
#                     </doc>
#                     <group name="piezo_material" type="NXpiezoelectric_material" optional="true">
#                         <doc>
#                              The material description and properties of the piezoelectric scanner materials.
#                         </doc>
#                     </group>
#                 </group>
#                 <group type="NXpositioner_spm">
#                     <doc>
#                          The positioner information like the position of the tip, the position of the
#                          sample, PID loop feedback etc.
#                     </doc>
#                 </group>
#             </group>
#             <group name="tip_temperature" type="NXsensor" optional="true">
#                 <doc>
#                      The temperature of the scan environment or tip of the cantilever.
#                 </doc>
#             </group>
#         </group>
#     </group>
# </definition>
